(function(t){function e(e){for(var n,s,i=e[0],u=e[1],l=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);c&&c(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var u=a[i];0!==r[u]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var c=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"05d5":function(t,e,a){},"10d3":function(t,e,a){},"11f0":function(t,e,a){"use strict";a("c29d")},"14f3":function(t,e,a){},1775:function(t,e,a){"use strict";a("14f3")},"1cac":function(t,e,a){},"224b":function(t,e,a){},2784:function(t,e,a){},"2dbd":function(t,e,a){"use strict";a("f11e")},"4a99":function(t,e,a){"use strict";a("9242")},"4fbb":function(t,e,a){},"5a7a":function(t,e,a){"use strict";a("2784")},"5fb7":function(t,e,a){"use strict";a("786e")},"735d":function(t,e,a){"use strict";a("10d3")},"786e":function(t,e,a){},"7f4c":function(t,e,a){},"868d":function(t,e,a){},8784:function(t,e,a){"use strict";a("05d5")},"87c2":function(t,e,a){"use strict";a("1cac")},"8f56":function(t,e,a){},9242:function(t,e,a){},"9e2f":function(t,e,a){"use strict";a("c61f")},"9fbb":function(t,e,a){},a4e0:function(t,e,a){"use strict";a("868d")},adf7:function(t,e,a){"use strict";a("9fbb")},b19c:function(t,e,a){},b20f:function(t,e,a){},c05d:function(t,e,a){"use strict";a("224b")},c29d:function(t,e,a){},c61f:function(t,e,a){},c774:function(t,e,a){"use strict";a("7f4c")},c867:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("6005"),a("a01d"),a("46d2"),a("6463");var n=a("d04a"),r=a("4bf0"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",elevation:"1",color:"white"}},[a("v-container",{staticClass:"pa-0 fill-height",attrs:{fluid:t.$vuetify.breakpoint.lgAndDown}},[a("v-row",{staticClass:"flex-nowrap",attrs:{align:"center"}},[a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"mt-2"},[t.$vuetify.breakpoint.lgAndUp?a("UptraceLogoLarge",{attrs:{to:{name:"Home"}}}):a("UptraceLogoSmall",{attrs:{to:{name:"Home"}}})],1)]),a("v-col",{attrs:{cols:"auto"}},[a("v-tabs",{staticClass:"ml-8",attrs:{optional:""}},[a("v-tab",{attrs:{to:{name:"Overview"}}},[t._v("Overview")]),a("v-tab",{attrs:{to:{name:"GroupList"}}},[t._v("Explore")]),a("v-tab",{attrs:{to:{name:"Help"}}},[t._v("Help")])],1)],1),a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-text-field",{staticStyle:{"min-width":"300px",width:"300px"},attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Jump to trace id...","hide-details":"",flat:"",solo:"","background-color":"grey lighten-4"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.jumpToTrace.apply(null,arguments)}},model:{value:t.traceId,callback:function(e){t.traceId=e},expression:"traceId"}})],1),a("v-col",{staticClass:"d-none d-md-inline-block",attrs:{cols:"auto"}},[a("v-btn",{staticClass:"deep-orange darken-3 ml-lg-10",attrs:{href:"https://uptrace.dev/compare-open-source",target:"_blank",dark:""}},[t._v("Upgrade")])],1)],1)],1)],1),a("v-main",[a("XSnackbar"),a("router-view")],1)],1)},s=[],i=a("4956"),u=(a("a2c3"),a("7697"),a("b35d"),a("4967"),a("eef3"),a("e0f4"),a("9b3c"),a("7e15"),a("3b38"),a("1753"),a("c63a"),a("0297"),a("bcba"));function l(t,e){var a;function n(){if(void 0===a)try{a=e.apply(void 0,arguments)}catch(t){console.error(t)}return a}function r(){return n.apply(void 0,arguments)}function o(){return a}return r.inject=o,r}function c(){var t=Object(r["getCurrentInstance"])();if(!t)throw new Error("useRouter is called outside of setup");var e=t.proxy.$router,a=Object(r["computed"])((function(){return t.proxy.$route}));return{router:e,route:a}}var d=l("useQuery",(function(){var t,e=c(),a=e.router,n=e.route,o=Object(r["shallowRef"])(),s=Object(r["shallowRef"])([]),l=Object(r["shallowRef"])([]),d=Object(r["computed"])((function(){if(n.value.matched.length){var t,e={},a=Object(i["a"])(l.value);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.toQuery){var o=r.toQuery();o&&Object.assign(e,Object(u["cloneDeep"])(o))}}}catch(s){a.e(s)}finally{a.f()}return e}})),v=Object(u["debounce"])((function(e,n){if(void 0!==n){for(var r in n)if(void 0===n[r])return;t=Object(u["omit"])(e,"matched"),t.query=n,a.replace({query:n,hash:e.hash}).catch((function(){}))}}),10);function f(t){function e(){var e=l.value.findIndex((function(e){return e===t}));e>=0&&(l.value.splice(e,1),l.value=l.value)}return l.value.push(t),l.value=l.value,Object(r["onBeforeUnmount"])(e),t.fromQuery&&Object(r["onBeforeMount"])((function(){o.value&&t.fromQuery&&t.fromQuery(o.value.query)})),e}function b(t){s.value.push(t),s.value=s.value,Object(r["onBeforeUnmount"])((function(){var e=s.value.findIndex((function(e){return e===t}));e>=0&&(s.value.splice(e,1),s.value=s.value)})),Object(r["onBeforeMount"])((function(){o.value&&t(o.value)}))}return Object(r["watch"])(n,(function(e){if(e.matched.length&&(!t||!p(e,t))){var a,n=Object(i["a"])(l.value);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.fromQuery&&r.fromQuery(e.query)}}catch(v){n.e(v)}finally{n.f()}var u,c=Object(i["a"])(s.value);try{for(c.s();!(u=c.n()).done;){var d=u.value;d(e)}}catch(v){c.e(v)}finally{c.f()}o.value=e}}),{immediate:!0,flush:"sync"}),Object(r["watch"])(n,(function(e){e.matched.length&&(t&&p(e,t)||v(e,d.value))}),{flush:"post"}),Object(r["watch"])(d,(function(t,e){m(t,e)||v(n.value,t)}),{immediate:!0,flush:"post"}),{route:o,onRouteUpdated:b,sync:f}}));function p(t,e){return t.path===e.path&&v(t.params,e.params)&&m(t.query,e.query)}function v(t,e){return JSON.stringify(t,Object.keys(t).sort())===JSON.stringify(e,Object.keys(e).sort())}function m(t,e){var a=new URLSearchParams(t),n=new URLSearchParams(e);return a.toString()===n.toString()}var f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",t._g(t._b({staticClass:"d-inline-block"},"router-link",t.$attrs,!1),t.$listeners),[a("v-img",{staticClass:"shrink",attrs:{src:"/uptrace/logo-large.svg","max-width":"160",width:"160",alt:"Uptrace"}})],1)},b=[],h=a("bdd7"),g=a("5628"),y=a.n(g),x=a("83f7"),O={},_=Object(h["a"])(O,f,b,!1,null,null,null),j=_.exports;y()(_,{VImg:x["a"]});var C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",t._g(t._b({staticClass:"d-inline-block"},"router-link",t.$attrs,!1),t.$listeners),[a("v-img",{staticClass:"shrink",attrs:{src:"/uptrace/logo-small.svg","max-width":t.width,width:t.width,transition:"scale-transition",alt:"Uptrace"}})],1)},w=[],k=(a("8ec1"),Object(r["defineComponent"])({name:"UptraceLogoSmall",props:{width:{type:[Number,String],default:38}}})),S=k,V=Object(h["a"])(S,C,w,!1,null,null,null),q=V.exports;y()(V,{VImg:x["a"]});var P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{color:t.snackbar.color,timeout:t.snackbar.timeout,top:""},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[a("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snackbar.active=!1}}},"v-btn",n,!1),[t._v("Close")])]}}]),model:{value:t.snackbar.active,callback:function(e){t.$set(t.snackbar,"active",e)},expression:"snackbar.active"}},[a("span",[t._v(t._s(t.snackbar.notification))])])},T=[],R=l("useSnackbar",(function(){var t=Object(r["ref"])(""),e=Object(r["ref"])(!1),a=Object(r["ref"])(""),n=Object(r["ref"])(-1);function o(t){i(t),a.value="success"}function s(t){i(I(t)),a.value="error"}function i(a){t.value=a,e.value=!0,n.value=1e4}return Object(r["proxyRefs"])({notification:t,active:e,color:a,timeout:n,notifySuccess:o,notifyError:s})}));function I(t){return"string"===typeof t?t:t.message}var E=Object(r["defineComponent"])({name:"XSnackbar",setup:function(){return{snackbar:R()}}}),D=E,L=a("cfac"),M=a("26fb"),N=Object(h["a"])(D,P,T,!1,null,"29f4304c",null),$=N.exports;y()(N,{VBtn:L["a"],VSnackbar:M["a"]});var B=Object(r["defineComponent"])({name:"App",components:{UptraceLogoLarge:j,UptraceLogoSmall:q,XSnackbar:$},setup:function(){var t=c(),e=t.router;d();var a=Object(r["shallowRef"])("");function n(){a.value&&(e.push({name:"TraceShow",params:{traceId:a.value}}),a.value="")}return{traceId:a,jumpToTrace:n}}}),A=B,F=(a("2dbd"),a("3b39")),G=a("75df"),X=a("b72f"),H=a("8ad5"),U=a("4955"),Q=a("07df"),W=a("497f"),z=a("0905"),K=a("cde6"),J=a("7e31"),Z=Object(h["a"])(A,o,s,!1,null,"0255155c",null),Y=Z.exports;y()(Z,{VApp:F["a"],VAppBar:G["a"],VBtn:L["a"],VCol:X["a"],VContainer:H["a"],VMain:U["a"],VRow:Q["a"],VSpacer:W["a"],VTab:z["a"],VTabs:K["a"],VTextField:J["a"]});var tt=a("dc3b"),et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XPlaceholder",{scopedSlots:t._u([t.systems.hasNoData?{key:"placeholder",fn:function(){return[a("HelpCard",{attrs:{"date-range":t.dateRange,loading:t.systems.loading}})]},proxy:!0}:null],null,!0)},[a("div",[a("v-container",{staticClass:"pb-0",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-row",{staticClass:"mb-4",attrs:{align:"center"}},[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("DateRangePicker",{attrs:{"date-range":t.dateRange}})],1)],1)],1)],1),a("v-container",{staticClass:"pt-2",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-row",[a("v-col",[a("SystemOverview",{attrs:{"date-range":t.dateRange,systems:t.systems}})],1)],1)],1)],1)},at=[],nt=a("2768"),rt=a("e97b"),ot=a("e48e"),st=a("e636"),it=(a("c19e"),a("c3c4"),a("239e")),ut=a("5529"),lt=a("7a4f"),ct=a("5e25"),dt=l("useForceReload",(function(){var t=Object(r["ref"])(0);function e(){t.value=Date.now()}var a=Object(r["computed"])((function(){return t.value?{_force:t.value}:{}}));return{forceReload:e,forceReloadParams:a}})),pt=(a("da4f"),a("3017")),vt=a("83af"),mt=(a("17ae"),a("687d"),a("82ba")),ft=a("98ee"),bt=1,ht=1e3*bt,gt=60*ht,yt=60*gt,xt=24*yt;function Ot(t){if(t instanceof Date)return t;if("number"===typeof t)return new Date(t);if("string"!==typeof t)return new Date(NaN);if(/^\d+$/.test(t))return new Date(parseInt(t,10)/1e6);var e=Date.parse(t);return new Date(e)}function _t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LLL d y HH:mm";return Ct(t,e)}function jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LLL d y HH:mm:ss.SSS";return Ct(t,e)}function Ct(t,e){return t?("string"===typeof t&&(t=Object(pt["a"])(t)),Object(vt["a"])(t,e)):String(t)}var wt="yyyyMMdd'T'HHmmss";function kt(t){return Object(vt["a"])(Vt(t),wt)}function St(t){var e=Object(mt["a"])(t,wt,new Date);return Object(ft["a"])(e)?(e=qt(e),e):new Date(t)}function Vt(t){return Object(ut["a"])(t,t.getTimezoneOffset()*gt)}function qt(t){return Object(it["a"])(t,t.getTimezoneOffset()*gt)}function Pt(t,e){var a=t.getTime()%e;return 0===a?t:Object(ut["a"])(t,e-a)}function Tt(){var t,e=Object(r["ref"])(),a=Object(r["ref"])(!1),n=Object(r["ref"])(0),o=dt(),s=o.forceReload,i=o.forceReloadParams,u=Object(r["computed"])((function(){return Boolean(e.value)&&Boolean(n.value)})),l=Object(r["computed"])((function(){if(u.value){var t=Object(it["a"])(e.value,n.value);return t}})),c=Object(r["computed"])({get:function(){return qt(l.value).toISOString().substr(0,10)},set:function(t){var e=Vt(new Date(t));x(e)}}),p=Object(r["computed"])({get:function(){var t=l.value;return"".concat(t.getHours(),":").concat(t.getMinutes())},set:function(t){var e=new Date(l.value.getTime()),a=t.split(":"),n=Object(st["a"])(a,2),r=n[0],o=n[1];e.setHours(parseInt(r,10)),e.setMinutes(parseInt(o,10)),x(e)}});function v(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!n&&!a.value)return!1;a.value=!0;var r=Pt(new Date,gt);return!(r<=e.value)&&(e.value=r,t&&clearTimeout(t),t=setTimeout(v,5*gt),!0)}function m(){t&&(clearTimeout(t),t=null),a.value=!1}function f(){v(!0),s()}function b(){m(),e.value=void 0,n.value=0}function h(t,a){var r=a.getTime()-t.getTime();e.value&&e.value.getTime()===a.getTime()&&n.value===r||(m(),e.value=a,n.value=r)}function g(t){if(e.value&&!a.value){var r=Object(ut["a"])(l.value,t),o=new Date;if(r<o)return n.value=t,void(e.value=r)}n.value=t,v(!0)}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"string"===typeof t&&(t=new Date(t)),e&&(n.value=e),t=Object(ut["a"])(t,n.value/2);var a=Pt(new Date,gt);t=Object(lt["a"])([t,a]),O(t)}function x(t){O(Object(ut["a"])(t,n.value))}function O(t){m(),e.value=t}var _=Object(r["computed"])((function(){if(!u.value)return!1;var t=Object(ct["a"])(new Date,l.value);return t<30*xt}));function j(){m(),e.value=Object(it["a"])(e.value,n.value)}var C=Object(r["computed"])((function(){if(!u.value||a.value)return!1;var t=Object(ct["a"])(new Date,e.value);return t>15*gt}));function w(){var t=Object(ut["a"])(e.value,n.value),a=new Date;O(t<=a?t:a)}function k(){var t;return u.value?a.value?Object(ot["a"])({},"time_dur",n.value/ht):(t={},Object(ot["a"])(t,"time_gte",kt(l.value)),Object(ot["a"])(t,"time_dur",n.value/ht),t):{}}function S(t){var e=t["time_dur"],a=t["time_gte"];e&&(n.value=parseInt(e,10)*ht,"string"===typeof a?x(St(a)):v(!0))}function V(){if(!u.value)return{time_gte:void 0,time_lt:void 0};var t=l.value,a=e.value,n=Object(rt["a"])(Object(rt["a"])({},i.value),{},{time_gte:t.toISOString(),time_lt:a.toISOString()});return n}function q(){d().sync({fromQuery:function(t){S(t)},toQuery:function(){return k()}})}return Object(r["proxyRefs"])({gte:l,lt:e,isValid:u,isNow:a,duration:n,datePicker:c,timePicker:p,updateNow:v,reload:f,forceReload:s,reset:b,change:h,changeDuration:g,changeWithin:y,changeGTE:x,changeLT:O,hasPrevPeriod:_,prevPeriod:j,hasNextPeriod:C,nextPeriod:w,queryParams:k,axiosParams:V,syncQuery:q})}a("582e"),a("60d1"),a("d4c6"),a("5a44"),a("edf1"),a("20ad"),a("9e06"),a("b05f");var Rt=a("4f14"),It=a.n(Rt);function Et(t){var e=R(),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(),o=Object(r["shallowRef"])(!1),s=0,i=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var r;return s++,function(e){o.value=!0,r=t.apply(void 0,a),r.then((function(t){o.value=!1,e===s&&u(t)}),(function(t){return o.value=!1,e===s&&l(t),t}))}(s),r},u=function(t){a.value=t,n.value=void 0},l=function(t){if(null!==t&&!It.a.isCancel(t)){if(void 0===t)return a.value=void 0,void(n.value=void 0);a.value=void 0,n.value=t}},c=function(){s++},d=Object(r["computed"])((function(){var t,e;if(!n.value)return"";var a=null===(t=n.value.response)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message;return Dt(a||n.value)}));return Object(r["watch"])(n,(function(t){var a;if(t&&d.value)switch(null===(a=t.response)||void 0===a?void 0:a.status){case 400:case 500:e.notifyError(d.value)}})),{promised:i,result:a,error:n,pending:o,cancel:c}}function Dt(t){return"string"===typeof t?t:t.message}function Lt(){var t=null,e=Et((function(e){return null===e?Promise.reject(null):Mt(e)?(e&&!e.cancelToken&&(t=It.a.CancelToken.source(),e=Object(rt["a"])(Object(rt["a"])({},e),{},{cancelToken:t.token})),It.a.request(e)):Promise.reject(void 0)})),a=e.pending,n=e.promised,o=e.result,s=e.error,i=e.cancel,u=Object(r["computed"])((function(){var t;return null===(t=o.value)||void 0===t?void 0:t.data}));function l(){i(),t&&(t.cancel(),t=null)}function c(t,e){return l(),e&&e.signal.addEventListener("abort",(function(){l()})),n(t)}return{loading:a,result:o,data:u,error:s,request:c,abort:l}}function Mt(t){return void 0!==t&&((!t.url||!t.url.includes("undefined"))&&((!("params"in t)||void 0!==t.params)&&(!(t.params&&!Nt(t.params))&&((!("data"in t)||void 0!==t.data)&&!(t.data&&!Nt(t.data))))))}function Nt(t){for(var e in t)if(void 0===t[e])return!1;return!0}function $t(t,e){var a,n,o="",s=function(t,r,o){a=new AbortController,e(t,n,o,a).catch((function(){})).finally((function(){a=void 0}))},i=function(t,e,a){l(),s(t,n,a),n=t,o=JSON.stringify(n)},u=i;function l(){a&&(a.abort(),a=void 0,n=void 0,o="")}function c(t){var e=function(){};if(t){if(a&&!d(t))return;return s(t,n,e)}if(n){if(a)return;return s(n,void 0,e)}}function d(t){return JSON.stringify(t)!==o}i=function(t,e,a){d(t)&&u(t,e,a)};var p=Object(r["watch"])(t,i,{immediate:!0});return Object(r["onBeforeUnmount"])(l),{abort:l,reload:c,stopWatch:p}}function Bt(t){var e=Lt(),a=e.loading,n=e.data,r=e.error,o=e.request,s=$t(t,(function(t,e,a,n){return o(t,n)})),i=s.reload,u=s.abort;return{loading:a,data:n,error:r,abort:u,reload:i}}function At(t){var e=Bt((function(){return{url:"/api/tracing/systems",params:Object(rt["a"])({},t.axiosParams())}})),a=e.loading,n=e.data,o=Object(r["computed"])((function(){var t,e;return Ft(null!==(t=null===(e=n.value)||void 0===e?void 0:e.systems)&&void 0!==t?t:[])})),s=Object(r["computed"])((function(){return Gt(o.value)})),i=Object(r["computed"])((function(){var t;return!!Array.isArray(null===(t=n.value)||void 0===t?void 0:t.systems)&&0===n.value.systems.length})),u=Object(r["shallowRef"])(),l=Object(r["computed"])({get:function(){return u.value},set:function(t){u.value=t||void 0}}),c=Object(r["computed"])((function(){if(l.value){var t=o.value.find((function(t){return t.system===l.value}));return t}}));function d(){var t;return{system:null===(t=c.value)||void 0===t?void 0:t.system}}function p(t){l.value=t}function v(){l.value=void 0}return Object(r["proxyRefs"])({loading:a,list:o,tree:s,hasNoData:i,activeValue:l,activeItem:c,axiosParams:d,change:p,reset:v})}function Ft(t){if(!t.length)return[];t=Object(u["clone"])(t);var e,a={},n=Object(i["a"])(t);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=r.system.indexOf(":");if(-1!==o){var s=r.system.slice(0,o),l=a[s];l?l.numChild++:a[s]=Object(rt["a"])(Object(rt["a"])({},r),{},{system:s,dummy:!0,numChild:1})}}}catch(m){n.e(m)}finally{n.f()}for(var c in a){var d=a[c];t.push(Object(rt["a"])(Object(rt["a"])({},d),{},{system:d.system+":all"}))}t=Object(u["orderBy"])(t,"system");var p=t.findIndex((function(t){return"internal"===t.system}));if(p>=0){var v=t[p];v.dummy=!0,t.splice(p,1),t.unshift(v)}return t.unshift({system:"all",dummy:!0,numChild:0}),t}function Gt(t){return t=Object(u["clone"])(t),t=t.filter((function(t){return 1!==t.numChild})),t.slice(0).forEach((function(e){if(e.system.endsWith(":all")){for(var a=[],n=e.system.slice(0,-"all".length),r=t.length-1;r>=0;r--){var o=t[r];o.system!=e.system&&(o.system.startsWith(n)&&(t.splice(r,1),a.push(o)))}e.children=a}})),t}var Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-no-wrap"},[a("v-btn",{attrs:{text:"",icon:"",disabled:!t.dateRange.hasPrevPeriod,title:"Previous period"},on:{click:t.dateRange.prevPeriod}},[a("v-icon",{staticClass:"small"},[t._v("mdi-chevron-left")])],1),t.dateRange.gte?a("DateTimePeriodMenu",{attrs:{"date-range":t.dateRange,periods:t.periods}}):t._e(),a("PeriodPickerMenu",{attrs:{value:t.dateRange.duration,periods:t.periods},on:{input:function(e){return t.dateRange.changeDuration(e)}}}),a("v-btn",{attrs:{text:"",icon:"",disabled:!t.dateRange.hasNextPeriod,title:"Next period"},on:{click:t.dateRange.nextPeriod}},[a("v-icon",{staticClass:"small"},[t._v("mdi-chevron-right")])],1),a("v-btn",{staticClass:"ml-2",attrs:{small:"",outlined:""},on:{click:t.dateRange.reload}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-refresh")]),a("span",[t._v(t._s(t.dateRange.isNow?"Reload":"Reset"))])],1)],1)},Ht=[],Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[t.dateRange.isNow?a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),n),[a("v-icon",{attrs:{small:"",title:t.datetimeFull(t.dateRange.gte)}},[t._v("mdi-calendar-blank")])],1):a("v-btn",t._g(t._b({staticClass:"px-1",attrs:{text:"",small:""}},"v-btn",r,!1),n),[a("XDate",{attrs:{date:t.dateRange.gte,format:t.format}}),a("v-icon",[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("DateTimePeriod",{attrs:{"date-range":t.dateRange,periods:t.periods},on:{"click:ok":function(e){t.menu=!1}}})],1)},Qt=[],Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{width:"340"}},[a("v-tabs",{attrs:{"background-color":"primary",dark:"","icons-and-text":"","fixed-tabs":""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab",{attrs:{href:"#date"}},[t._v(" Date "),a("v-icon",[t._v("mdi-calendar-outline")])],1),a("v-tab",{attrs:{href:"#time"}},[t._v(" Time "),a("v-icon",[t._v("mdi-clock-outline")])],1),a("v-tab",{attrs:{href:"#period"}},[t._v(" Period "),a("v-icon",[t._v("mdi-calendar-range-outline")])],1)],1),a("v-tabs-items",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab-item",{attrs:{value:"date"}},[a("v-date-picker",{attrs:{"full-width":""},model:{value:t.dateRange.datePicker,callback:function(e){t.$set(t.dateRange,"datePicker",e)},expression:"dateRange.datePicker"}})],1),a("v-tab-item",{attrs:{value:"time"}},[a("v-time-picker",{staticClass:"v-time-picker-custom",attrs:{format:"24hr","full-width":""},model:{value:t.dateRange.timePicker,callback:function(e){t.$set(t.dateRange,"timePicker",e)},expression:"dateRange.timePicker"}})],1),a("v-tab-item",{attrs:{value:"period"}},[a("v-card",{attrs:{"min-height":"378px"}},[a("PeriodList",{attrs:{"date-range":t.dateRange,periods:t.periods}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$emit("click:ok")}}},[t._v("OK")])],1)],1)},zt=[],Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{dense:""}},[a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.activePeriodMs,callback:function(e){t.activePeriodMs=e},expression:"activePeriodMs"}},t._l(t.periods,(function(e){return a("v-list-item",{key:e.ms,attrs:{value:e.ms}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)})),1)],1)},Jt=[],Zt=Object(r["defineComponent"])({name:"PeriodList",props:{dateRange:{type:Object,required:!0},periods:{type:Array,required:!0}},setup:function(t,e){var a=e.emit,n=Object(r["computed"])({get:function(){return t.dateRange.duration},set:function(e){t.dateRange.changeDuration(e)}}),o=Object(r["computed"])((function(){var e=t.periods.find((function(t){return t.ms===n.value}));return e}));return Object(r["onMounted"])((function(){Object(r["watchEffect"])((function(){if(!o.value){var e=t.periods[0];n.value=e.ms}}))})),Object(r["watch"])(o,(function(t){a("update:period",t)}),{immediate:!0}),{activePeriodMs:n,activePeriod:o}}}),Yt=Zt,te=a("206a"),ee=a("4c49"),ae=a("7e7e"),ne=a("f6d92"),re=Object(h["a"])(Yt,Kt,Jt,!1,null,null,null),oe=re.exports;y()(re,{VList:te["a"],VListItem:ee["a"],VListItemContent:ae["b"],VListItemGroup:ne["a"],VListItemTitle:ae["c"]});var se=Object(r["defineComponent"])({name:"DateTimePeriod",components:{PeriodList:oe},props:{dateRange:{type:Object,required:!0},periods:{type:Array,required:!0}},setup:function(){var t=Object(r["ref"])();return{activeTab:t}}}),ie=se,ue=(a("d36a"),a("d2e5")),le=a("4873"),ce=a("0852"),de=a("2863"),pe=a("c599"),ve=a("f35a"),me=a("42f1"),fe=Object(h["a"])(ie,Wt,zt,!1,null,null,null),be=fe.exports;y()(fe,{VBtn:L["a"],VCard:ue["a"],VCardActions:le["a"],VDatePicker:ce["a"],VIcon:de["a"],VSpacer:W["a"],VTab:z["a"],VTabItem:pe["a"],VTabs:K["a"],VTabsItems:ve["a"],VTimePicker:me["a"]});var he=Object(r["defineComponent"])({name:"DateTimePeriodMenu",components:{DateTimePeriod:be},props:{dateRange:{type:Object,required:!0},periods:{type:Array,required:!0},format:{type:String,default:"short"}},setup:function(){var t=Object(r["ref"])(!1);return{menu:t,datetimeFull:jt}}}),ge=he,ye=a("6daa"),xe=Object(h["a"])(ge,Ut,Qt,!1,null,"6a16f40c",null),Oe=xe.exports;y()(xe,{VBtn:L["a"],VIcon:de["a"],VMenu:ye["a"]});var _e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"px-1",attrs:{text:"",small:""}},n),[t.activePeriod?a("span",[t._v(t._s(t.activePeriod.text))]):a("span",[t._v("Period")]),a("v-icon",[t._v("mdi-menu-down")])],1)]}}])},[a("v-list",{attrs:{dense:""}},[a("v-list-item-group",{attrs:{value:t.value,mandatory:""},on:{change:t.onChange}},t._l(t.periods,(function(e){return a("v-list-item",{key:e.ms,attrs:{value:e.ms}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Last "+t._s(e.text))])],1)],1)})),1)],1)],1)},je=[],Ce=Object(r["defineComponent"])({name:"PeriodPickerMenu",props:{value:{type:Number,required:!0},periods:{type:Array,required:!0}},setup:function(t,e){var a=e.emit,n=Object(r["computed"])((function(){var e=t.periods.find((function(e){return e.ms===t.value}));return e}));function o(t){a("input",t)}return{activePeriod:n,onChange:o}}}),we=Ce,ke=Object(h["a"])(we,_e,je,!1,null,"c084ad56",null),Se=ke.exports;function Ve(t){for(var e=[],a=0,n=[1,3,6,12,24];a<n.length;a++){var r=n[a];e.push({text:"".concat(r," ").concat(1===r?"hour":"hours"),ms:r*yt})}for(var o=0,s=[3,7,10,14,30];o<s.length;o++){var i=s[o];i<=t&&e.push({text:"".concat(i," days"),ms:i*xt})}return e}y()(ke,{VBtn:L["a"],VIcon:de["a"],VList:te["a"],VListItem:ee["a"],VListItemContent:ae["b"],VListItemGroup:ne["a"],VListItemTitle:ae["c"],VMenu:ye["a"]});var qe=Object(r["defineComponent"])({name:"DateRangePicker",components:{DateTimePeriodMenu:Oe,PeriodPickerMenu:Se},props:{dateRange:{type:Object,required:!0},defaultPeriod:{type:Number,default:yt}},setup:function(t){var e=Object(r["computed"])((function(){return Ve(30)}));return Object(r["onMounted"])((function(){Object(r["watchEffect"])((function(){if(!t.dateRange.duration){var a=e.value.find((function(e){return e.ms===t.defaultPeriod}));a?t.dateRange.changeDuration(a.ms):t.dateRange.changeDuration(e.value[0].ms)}}))})),{periods:e}}}),Pe=qe,Te=Object(h["a"])(Pe,Xt,Ht,!1,null,"10a87f18",null),Re=Te.exports;y()(Te,{VBtn:L["a"],VIcon:de["a"]});var Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container--fixed-sm"},[a("PageToolbar",{attrs:{loading:t.loading}},[a("v-toolbar-title",[t._v("Send data to Uptrace")]),a("v-spacer"),t.dateRange?a("v-btn",{attrs:{small:"",outlined:""},on:{click:t.dateRange.reload}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-refresh")]),a("span",{staticClass:"ml-1"},[t._v("Reload")])],1):t._e()],1),a("v-container",{staticClass:"mb-6 px-4 py-6"},[a("v-row",[a("v-col",{staticClass:"text-body-1"},[a("p",[t._v(" To start sending data to Uptrace, you need to install Uptrace client and configure it using the provided DSN (connection string). ")]),a("p",[t._v("For Go and .NET use "),a("strong",[t._v("OTLP/gRPC")]),t._v(":")]),a("XCode",{staticClass:"mb-4",attrs:{code:t.otlpGrpc}}),a("p",[t._v("For Python, Ruby, and Node.JS use "),a("strong",[t._v("OTLP/HTTP")]),t._v(":")]),a("XCode",{staticClass:"mb-4",attrs:{code:t.otlpHttp}}),a("p",[t._v(" See "),a("a",{attrs:{href:"https://docs.uptrace.dev/guide/os.html#otlp",target:"_blank"}},[t._v("documentation")]),t._v(" for instructions for your programming language. ")])],1)],1)],1),a("PageToolbar",{attrs:{loading:t.loading}},[a("v-toolbar-title",[t._v("Already using OpenTelemetry Collector?")])],1),a("v-container",{staticClass:"mb-6 px-4 py-6"},[a("v-row",[a("v-col",{staticClass:"text-body-1"},[t._v(" Uptrace natively supports OpenTelemetry Protocol (OTLP) in case you are already using OpenTelemetry Collector. Use the following OTLP exporter config: ")])],1),a("v-row",[a("v-col",[a("CollectorTabs",{attrs:{http:t.otlpHttp,grpc:t.otlpGrpc}})],1)],1)],1),a("HelpLinks")],1)},Ee=[],De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-tabs",{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab",{attrs:{href:"#grpc"}},[t._v("GRPC")]),a("v-tab",{attrs:{href:"#http"}},[t._v("HTTP")])],1),a("v-tabs-items",{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab-item",{attrs:{value:"grpc"}},[a("XCode",{attrs:{language:"yaml",code:t.otlpGrpc}})],1),a("v-tab-item",{attrs:{value:"http"}},[a("XCode",{attrs:{language:"yaml",code:t.otlpHttp}})],1)],1)],1)},Le=[],Me=(a("cbf9"),Object(r["defineComponent"])({name:"CollectorTabs",props:{grpc:{type:String,default:""},http:{type:String,default:""}},setup:function(t){var e=Object(r["ref"])(),a=Object(r["computed"])((function(){return Ne($e,t.grpc)})),n=Object(r["computed"])((function(){return Ne(Be,t.http)}));return{tabs:e,otlpGrpc:a,otlpHttp:n}}}));function Ne(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return t.replace(/{(\d+)}/g,(function(t,e){return"undefined"!==typeof a[e]?a[e]:t}))}var $e="\nexporters:\n  otlp:\n    endpoint: {0}\n    tls:\n      insecure: true\n".trim(),Be="\nexporters:\n  otlphttp:\n    endpoint: {0}\n    tls:\n      insecure: true\n".trim(),Ae=Me,Fe=Object(h["a"])(Ae,De,Le,!1,null,"0e358e61",null),Ge=Fe.exports;y()(Fe,{VCard:ue["a"],VTab:z["a"],VTabItem:pe["a"],VTabs:K["a"],VTabsItems:ve["a"]});var Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageToolbar",[a("v-toolbar-title",[t._v("See also")])],1),a("v-container",{staticClass:"mb-6"},[a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"text-subtitle-1"},[a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/uptrace/uptrace/releases/latest",target:"_blank"}},[t._v("Latest release")])]),a("li",[a("a",{attrs:{href:"https://docs.uptrace.dev/",target:"_blank"}},[t._v("Uptrace documentation")])]),a("li",[a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/",target:"_blank"}},[t._v("OpenTelemetry documentation")])]),a("li",[a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/instrumentations/",target:"_blank"}},[t._v("Instrumentations")])]),a("li",[a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/collector/",target:"_blank"}},[t._v("Collector Configurator")])]),a("li",[a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/attributes/",target:"_blank"}},[t._v("Semantic attributes")])]),a("li",[a("a",{attrs:{href:"https://github.com/uptrace",target:"_blank"}},[t._v("GitHub")])])])]),a("v-card-text",{staticClass:"text-body-1 text--primary"},[t._v(" Have questions? Don't hesitate to "),a("a",{attrs:{href:"mailto:support@uptrace.dev"}},[t._v("email")]),t._v(" us. We reply as soon as possible. ")])],1)],1)],1)},He=[],Ue=Object(r["defineComponent"])({name:"HelpLinks"}),Qe=Ue,We=a("98ad"),ze=Object(h["a"])(Qe,Xe,He,!1,null,null,null),Ke=ze.exports;y()(ze,{VCard:ue["a"],VCardText:le["b"],VContainer:H["a"],VToolbarTitle:We["a"]});var Je=Object(r["defineComponent"])({name:"HelpCard",components:{CollectorTabs:Ge,HelpLinks:Ke},props:{loading:{type:Boolean,default:!1},dateRange:{type:Object,default:void 0}},setup:function(){var t=Bt((function(){return{url:"/api/tracing/conn-info"}})),e=t.data,a=Object(r["computed"])((function(){var t,a;return null!==(t=null===(a=e.value)||void 0===a?void 0:a.grpc)&&void 0!==t?t:"http://localhost:4317"})),n=Object(r["computed"])((function(){var t,a;return null!==(t=null===(a=e.value)||void 0===a?void 0:a.http)&&void 0!==t?t:"http://localhost:14318"}));return{otlpGrpc:a,otlpHttp:n}}}),Ze=Je,Ye=Object(h["a"])(Ze,Ie,Ee,!1,null,"792d3afa",null),ta=Ye.exports;y()(Ye,{VBtn:L["a"],VCol:X["a"],VContainer:H["a"],VIcon:de["a"],VRow:Q["a"],VSpacer:W["a"],VToolbarTitle:We["a"]});var ea,aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XPlaceholder",[a("v-card",{staticClass:"mb-4",attrs:{outlined:"",rounded:"lg"}},[a("v-toolbar",{attrs:{flat:"",color:"light-blue lighten-5"}},[a("v-toolbar-title",[t._v("Systems")]),a("v-spacer"),a("v-btn",{staticClass:"primary",attrs:{to:t.exploreRoute,small:""}},[t._v("Open explorer")])],1),a("v-card-text",{staticClass:"pb-0"},[t.systems.types.length>=3?a("v-slide-group",{staticClass:"ml-2",attrs:{"center-active":"","show-arrows":""},model:{value:t.systems.filter,callback:function(e){t.$set(t.systems,"filter",e)},expression:"systems.filter"}},t._l(t.systems.types,(function(e,n){return a("v-slide-item",{key:e,attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.active,s=r.toggle;return[a("v-btn",{class:{"ml-1":n>0},attrs:{"input-value":o,"active-class":"blue white--text",small:"",depressed:"",rounded:""},on:{click:s}},[t._v(" "+t._s(e)+" ")])]}}],null,!0)})})),1):t._e()],1),a("v-card-text",[a("OverviewTable",{attrs:{"date-range":t.dateRange,loading:t.systems.loading,items:t.systems.pageSystems,order:t.systems.order}})],1)],1),a("XPagination",{attrs:{pager:t.systems.pager}})],1)},na=[],ra=a("c0ac"),oa=a("b361");a("3856"),a("bd32"),a("a9bc"),a("4c82"),a("2dc3"),a("2bd3");function sa(t){var e=ia(t),a=Object(st["a"])(e,2),n=a[0],r=a[1];return n===ea.allSystem||r===ea.allSystem}function ia(t){if(!t)return["",""];var e=t.indexOf(":");return e>=0?t.slice(e+1)===ea.allSystem?[t.slice(0,e),ea.allSystem]:[t.slice(0,e),t]:[t,t]}function ua(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function la(t){if("string"!==typeof t)return JSON.stringify(t);if(!t.length)return'""';if("'"===t[0]&&"'"===t[t.length-1])return t;if('"'===t[0]&&'"'===t[t.length-1])return t;var e=parseFloat(t);return isNaN(e)||e.toString()!==t?JSON.stringify(t):e}(function(t){t["allSystem"]="all",t["internalSystem"]="internal",t["itemId"]="item.id",t["itemName"]="item.name",t["spanEvents"]="span.events",t["spanId"]="span.id",t["spanParentId"]="span.parent_id",t["spanTraceId"]="span.trace_id",t["spanSystem"]="span.system",t["spanGroupId"]="span.group_id",t["spanName"]="span.name",t["spanKind"]="span.kind",t["spanTime"]="span.time",t["spanDuration"]="span.duration",t["spanStatusCode"]="span.status_code",t["spanStatusMessage"]="span.status_message",t["spanCount"]="span.count",t["spanCountPerMin"]="span.count_per_min",t["spanErrorCount"]="span.error_count",t["spanErrorPct"]="span.error_pct",t["serviceName"]="service.name",t["hostName"]="host.name",t["enduserId"]="enduser.id",t["httpMethod"]="http.method",t["httpStatusCode"]="http.status_code",t["rpcMethod"]="rpc.method",t["dbStatement"]="db.statement",t["dbSqlTable"]="db.sql.table",t["exceptionStacktrace"]="exception.stacktrace",t["codeFunction"]="code.function",t["codeFilepath"]="code.filepath"})(ea||(ea={}));var ca=" | ",da=/^where\s+span\.group_id\s+=\s+(\S+)$/i;function pa(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=null!==(t=e.paramName)&&void 0!==t?t:"query",n=c(),o=n.router,s=n.route,i=Object(r["shallowRef"])(!1),u=Object(r["shallowRef"])([]),l=Object(r["computed"])({set:function(t){u.value=va(t).map((function(t){return Object(r["reactive"])(t)}))},get:function(){return fa(u.value)}});function p(t){u.value.splice(t,1),u.value=u.value}function v(t){t.disabled=!t.disabled}function m(t){t.editQuery=t.query,t.editMode=!0}function f(t,e){e&&(t.editQuery!==t.query&&(t.error=""),t.query=t.editQuery),t.editMode=!1}function b(t){u.value.length===t.length&&u.value.forEach((function(e,a){var n,r,o=t[a];e.query=o.query,e.error=null!==(n=o.error)&&void 0!==n?n:"",e.disabled=null!==(r=o.disabled)&&void 0!==r&&r}))}function h(){return{query:l.value}}function g(){return new ba(l.value)}function y(t){e.syncQuery?o.push({query:Object(rt["a"])(Object(rt["a"])({},s.value.query),{},Object(ot["a"])({},a,t.toString()))}).catch((function(){})):l.value=t.toString()}return"string"===typeof e.query?l.value=e.query:e.query&&Object(r["watch"])(e.query,(function(t){l.value=t}),{immediate:!0}),e.syncQuery&&d().sync({fromQuery:function(t){var n,r,o=null!==(n=null!==(r=t[a])&&void 0!==r?r:e.query)&&void 0!==n?n:"";t.where&&(o+=ca+"where "+t.where),l.value=o},toQuery:function(){return Object(ot["a"])({},a,l.value)}}),Object(r["proxyRefs"])({rawMode:i,parts:u,query:l,removeAt:p,toggle:v,enterEditMode:m,exitEditMode:f,syncParts:b,axiosParams:h,createEditor:g,commitEdits:y})}function va(t){return t&&"string"===typeof t?t.split(ca).map((function(t){return t.trim()})).filter((function(t){return t.length})).map((function(t){return ma(t)})):[]}function ma(t){return{query:t,error:"",disabled:!1,editMode:!1,editQuery:""}}function fa(t){return t.map((function(t){return t.query})).join(ca)}var ba=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(ra["a"])(this,t),Object(ot["a"])(this,"parts",void 0),this.parts=va(e)}return Object(oa["a"])(t,[{key:"toString",value:function(){return fa(this.parts)}},{key:"reset",value:function(){return this.parts=[],this.add(ha(ea.spanGroupId)),this}},{key:"add",value:function(t){var e,a=this,n=Object(i["a"])(va(t));try{var r=function(){var t=e.value,n=a.parts.findIndex((function(e){return e.query===t.query}));-1===n&&a.parts.push(t)};for(n.s();!(e=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}return this}},{key:"where",value:function(t,e,a){return void 0===a?this.replaceOrPush(new RegExp("^where\\s+".concat(ua(t),"\\s+").concat(e,"$"),"i"),"where ".concat(t," ").concat(e)):this.replaceOrPush(new RegExp("^where\\s+".concat(ua(t),"\\s+").concat(e,"\\s+.+$"),"i"),"where ".concat(t," ").concat(e," ").concat(la(a)))}},{key:"replace",value:function(t,e){var a=this.parts.find((function(e){return t.test(e.query)}));return!!a&&(a.query=e,!0)}},{key:"replaceOrPush",value:function(t,e){return this.replace(t,e)||this.parts.push(ma(e)),this}},{key:"replaceOrUnshift",value:function(t,e){return this.replace(t,e)||this.parts.unshift(ma(e)),this}},{key:"remove",value:function(t){var e;e="string"===typeof t?this.parts.findIndex((function(e){return e.query===t})):this.parts.findIndex((function(e){return t.test(e.query)})),e>=0&&this.parts.splice(e,1)}},{key:"groupId",value:function(){var t,e=Object(i["a"])(this.parts);try{for(e.s();!(t=e.n()).done;){var a=t.value,n=a.query.match(da);if(n)return n[1]}}catch(r){e.e(r)}finally{e.f()}return""}},{key:"removeGroupFilter",value:function(){return this.remove(da),this}},{key:"replaceGroupBy",value:function(t){return this.replaceOrUnshift(/^group\s+by\s+/i,"group by ".concat(t))}}]),t}();function ha(t){var e=["group by ".concat(t),ea.spanCountPerMin,ea.spanErrorPct,"p50(".concat(ea.spanDuration,")"),"p90(".concat(ea.spanDuration,")"),"p99(".concat(ea.spanDuration,")")];return e.join(ca)}function ga(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{perPage:10},e=Object(r["shallowRef"])(0),a=Object(r["shallowRef"])(1),n=Object(r["shallowRef"])(t.perPage),o=Object(r["computed"])((function(){var t=(a.value-1)*n.value,r=t+n.value;return r>e.value&&(r=e.value),{start:t,end:r}})),s=Object(r["computed"])((function(){var t=1e3,a=Math.ceil(e.value/n.value);return a>t?t:a})),i=Object(r["computed"])((function(){return a.value>1}));function u(){i.value&&a.value--}var l=Object(r["computed"])((function(){return a.value<s.value}));function c(){l.value&&a.value++}function d(){a.value=1}function p(){return{page:a.value,limit:n.value}}return Object(r["watch"])(s,(function(t){a.value>t&&(a.value=1)})),Object(r["proxyRefs"])({numItem:e,page:a,perPage:n,pos:o,numPage:s,hasPrev:i,prev:u,hasNext:l,next:c,reset:d,axiosParams:p})}function ya(){var t,e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.column=null!==(t=a.column)&&void 0!==t?t:"",a.desc=null===(e=a.desc)||void 0===e||e;var n=Object(r["shallowRef"])(a.column),o=Object(r["shallowRef"])(a.desc),s=Object(r["shallowRef"])({}),i=Object(r["computed"])((function(){return o.value?"mdi-arrow-down":"mdi-arrow-up"}));function u(t){n.value=t.column,o.value=t.desc}function l(t){n.value!==t?(n.value=t,o.value=!0):o.value=!o.value}function c(t){var e=["cursor-pointer"];return n.value===t&&e.push("active"),o.value?e.push("desc"):e.push("asc"),e}function d(){n.value="",o.value=!0}return Object(r["watch"])((function(){return{sort_by:n.value,sort_dir:xa(o.value)}}),(function(t){s.value=t}),{immediate:!0,flush:"sync"}),Object(r["proxyRefs"])({column:n,desc:o,icon:i,axiosParams:s,change:u,reset:d,toggle:l,thClass:c})}function xa(t){return t?"desc":"asc"}function Oa(t){var e=ga({perPage:15}),a=ya({column:"system",desc:!1}),n=Object(r["ref"])(""),o=Bt((function(){return{url:"/api/tracing/systems-stats",params:Object(rt["a"])({},t.axiosParams())}})),s=o.loading,l=o.data,c=Object(r["computed"])((function(){var t,e,a=null!==(t=null===(e=l.value)||void 0===e?void 0:e.systems)&&void 0!==t?t:[];return a})),d=Object(r["computed"])((function(){var t,e=Object(u["orderBy"])(c.value,null!==(t=a.column)&&void 0!==t?t:"system",a.desc?"desc":"asc");return e})),p=Object(r["computed"])((function(){return n.value?d.value.filter((function(t){return t.system.startsWith(n.value)})):d.value})),v=Object(r["computed"])((function(){var t=p.value.slice(e.pos.start,e.pos.end);return t})),m=Object(r["computed"])((function(){var t,e=[],a=Object(i["a"])(c.value);try{for(a.s();!(t=a.n()).done;){var n=t.value,r=n.system,o=r.indexOf(":");o>=0&&(r=r.slice(0,o)),-1===e.indexOf(r)&&e.push(r)}}catch(s){a.e(s)}finally{a.f()}return e.sort()}));return Object(r["watch"])(p,(function(t){e.numItem=t.length}),{flush:"sync"}),Object(r["proxyRefs"])({pager:e,order:a,filter:n,loading:s,list:p,pageSystems:v,types:m})}var _a,ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-simple-table",{staticClass:"v-data-table--large"},[a("thead",{staticClass:"v-data-table-header"},[a("tr",[t.column?a("ThOrder",{attrs:{value:t.column,order:t.order}},[t._v(t._s(t.column))]):t._e(),a("ThOrder",{attrs:{value:"system",order:t.order}},[t._v("System")]),a("ThOrder",{attrs:{value:"rate",order:t.order,align:"center"}},[t._v("Spans per minute")]),a("ThOrder",{attrs:{value:"errorPct",order:t.order,align:"center"}},[t._v("Errors")]),a("ThOrder",{attrs:{value:"p50",order:t.order,align:"center"}},[t._v("P50 latency")]),a("ThOrder",{attrs:{value:"p99",order:t.order,align:"center"}},[t._v("P99 latency")])],1)]),a("thead",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[a("tr",{staticClass:"v-data-table__progress"},[a("th",{staticClass:"column",attrs:{colspan:"99"}},[a("v-progress-linear",{attrs:{height:"2",absolute:"",indeterminate:""}})],1)])]),t.items.length?t._e():a("tbody",[a("tr",{staticClass:"v-data-table__empty-wrapper"},[a("td",{attrs:{colspan:"99"}},[t._v("There are no data for the selected date range.")])])]),a("tbody",t._l(t.items,(function(e,n){return a("tr",{key:n},[t.column?a("td",{staticClass:"text-subtitle-1"},[a("router-link",{attrs:{to:t.columnRoute(e[t.column])},nativeOn:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(e[t.column])+" ")])],1):t._e(),a("td",{staticClass:"text-subtitle-1"},[a("router-link",{attrs:{to:t.groupListRoute(e.system)},nativeOn:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(e.system)+" ")])],1),a("td",{staticClass:"text-subtitle-2"},[a("div",{staticClass:"d-flex align-center"},[a("SparklineChart",{staticClass:"mr-2",attrs:{name:"rate",line:e.stats.rate,time:e.stats.time}}),a("XNum",{attrs:{value:e.rate}})],1)]),a("td",{staticClass:"text-subtitle-2"},[e.stats.errorCount?a("div",{staticClass:"d-flex align-center"},[a("SparklineChart",{staticClass:"mr-2",attrs:{name:"errorPct",line:e.stats.errorPct,time:e.stats.time}}),t._v(" "+t._s(t.percent(e.errorPct))+" ")],1):t._e()]),a("td",{staticClass:"text-subtitle-2"},[e.stats.p50?a("div",{staticClass:"d-flex align-center"},[a("SparklineChart",{staticClass:"mr-2",attrs:{name:"p50",line:e.stats.p50,time:e.stats.time}}),a("XDuration",{attrs:{duration:e.p50}})],1):t._e()]),a("td",{staticClass:"text-subtitle-2"},[e.stats.p99?a("div",{staticClass:"d-flex align-center"},[a("SparklineChart",{staticClass:"mr-2",attrs:{name:"p99",line:e.stats.p99,time:e.stats.time}}),a("XDuration",{attrs:{duration:e.p99}})],1):t._e()])])})),0)])],1)},Ca=[];a("970e");(function(t){t["Start"]="start",t["End"]="end",t["Center"]="center"})(_a||(_a={}));var wa,ka,Sa=n["default"].component("ThSort",{functional:!0,props:{value:{type:String,default:""},order:{type:Object,required:!0},align:{type:String,default:"start"}},render:function(t,e){var a,n=e.props,r=e.data,o=e.slots,s=[t("span",o().default)],i=t(de["a"],{props:{size:18},class:"v-data-table-header__icon"},"mdi-arrow-up");switch(n.align){case _a.Start:a="text-left",s.push(i);break;case _a.End:a="text-right",s.unshift(i);break;case _a.Center:a="text-center",s.push(i);break;default:throw new Error("unknown ".concat(n.align))}return t("th",Object(rt["a"])(Object(rt["a"])({},r),{},{class:["text-no-wrap",a,n.order.thClass(n.value)],on:{click:function(){n.order.toggle(n.value)}}}),s)}}),Va=Sa,qa=Object(h["a"])(Va,wa,ka,!1,null,"6e0f5777",null),Pa=qa.exports,Ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("EChart",{attrs:{width:t.chart.width,height:t.chart.height,option:t.chart.option}})},Ra=[],Ia=(a("9814"),a("0963")),Ea=a("e1ab"),Da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container"},[a("v-sheet",{staticClass:"mx-auto echart",attrs:{width:t.width,height:t.height}})],1)},La=[],Ma=(a("4ace"),a("8594"),Object(r["defineComponent"])({name:"EChart",props:{loading:{type:Boolean,default:!1},value:{type:Object,default:void 0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],required:!0},option:{type:Object,default:void 0},group:{type:[String,Symbol],default:void 0}},setup:function(t,e){var a,n=Object(r["shallowRef"])();function o(){if(!a){var r=n.value.getElementsByClassName("echart")[0];a=Ia["b"](r),e.emit("input",a),t.group&&$a(t.group,a)}}var s=Object(u["debounce"])((function(t){a.isDisposed()||a.setOption(t,{notMerge:!0,lazyUpdate:!0,silent:!0})}),50);return Object(r["onMounted"])((function(){Object(r["watch"])((function(){return t.option}),(function(t){t&&(o(),s(t))}),{immediate:!0}),Object(r["watch"])((function(){return t.loading}),(function(t){o(),t?a.showLoading():a.hideLoading()}),{immediate:!0})})),Object(r["onUnmounted"])((function(){a&&(t.group&&Ba(t.group,a),a.dispose())})),{container:n}}})),Na={};function $a(t,e){var a=Na[t];a||(a=[],Na[t]=a),a.push(e),Aa(e,a)}function Ba(t,e){var a=Na[t];if(a){var n=a.indexOf(e);n>=0&&a.splice(n,1)}}function Aa(t,e){t.on("updateAxisPointer",(function(a){for(var n=t.makeActionFromEvent(a),r=n.axesInfo||[],o=r.length-1;o>=0;o--)"y"===r[o].axisDim&&r.splice(o,1);var s,u=Object(i["a"])(e);try{for(u.s();!(s=u.n()).done;){var l=s.value;l!==t&&(delete n.axesInfo,l.dispatchAction(n,!0))}}catch(c){u.e(c)}finally{u.f()}}))}var Fa,Ga=Ma,Xa=(a("735d"),a("159b")),Ha=Object(h["a"])(Ga,Da,La,!1,null,null,null),Ua=Ha.exports;function Qa(t,e){var a="number"===typeof e;if(!a&&void 0!==e)return Fa.None;switch(t){case"count":case"rate":return Fa.None;case"errorPct":return Fa.Percents;case"p50":case"p90":case"p99":return Fa.Nanoseconds}var n="",r=t.match(/(\S+)\((\S+)\)/);return n=r?r[2]:t,Wa(n)?Fa.Nanoseconds:za(n)?Fa.Bytes:Ka(n)?Fa.Percents:Fa.None}function Wa(t){return t===ea.spanDuration||Ja(t,"duration")}function za(t){return Ja(t,"bytes")}function Ka(t){return t===ea.spanErrorPct||Ja(t,"pct")}function Ja(t,e){return t.endsWith("."+e)||t.endsWith("_"+e)}y()(Ha,{VSheet:Xa["a"]}),function(t){t["None"]="",t["Bytes"]="bytes",t["Nanoseconds"]="nanoseconds",t["Percents"]="percents"}(Fa||(Fa={}));var Za=a("8168"),Ya=a.n(Za);function tn(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return en(t,e,Object(rt["a"])({trimMantissa:!0},a))}function en(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"undefined"===typeof t?"0":Ya()(t).format(Object(rt["a"])({mantissa:e},a))}function an(t){return"number"!==typeof t||0===t?"0":Math.abs(t)<1?tn(t,3):Math.abs(t)<1e3?tn(t,1):(t/=1e3,Math.abs(t)<100?en(t,1)+"k":Math.abs(t)<1e3?en(t,0)+"k":(t/=1e3,Math.abs(t)<1e3?en(t,1)+"m":(t/=1e3,en(t,1)+"b")))}function nn(t){return"number"!==typeof t||Math.abs(t)<1e-4?"0%":Ya()(t).format({output:"percent",mantissa:rn(t),optionalMantissa:!0})}function rn(t){return t=Math.abs(t),t<.01?2:t<.1?1:0}function on(t){if("number"!==typeof t||0===t)return"0";if(Math.abs(t)<10)return tn(t,2);if(Math.abs(t)<1024)return tn(t,1);for(var e=0,a=["KB","MB","GB","TB","PB"];e<a.length;e++){var n=a[e];if(t/=1024,Math.abs(t)<10)return tn(t,1)+n;if(t=Math.round(t),Math.abs(t)<1e3)return tn(t,0)+n}return tn(t,0)+"PB"}function sn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"!==typeof t||0===t?"0":Math.abs(t)<1e3?en(t,0,e)+"ns":(t/=1e3,Math.abs(t)<100?en(t,1,e)+"µs":Math.abs(t)<1e4?en(t,0,e)+"µs":(t/=1e3,Math.abs(t)<100?en(t,1,e)+"ms":Math.abs(t)<1e4?en(t,0,e)+"ms":(t/=1e3,Math.abs(t)<100?en(t,1,e)+"s":(t/=60,Math.abs(t)<10?en(t,1,e)+"m":Math.abs(t)<100?en(t,0,e)+"m":(t/=60,Math.abs(t)<10?en(t,1,e)+"h":en(t,0,e)+"h")))))}function un(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"!==typeof t||0===t?"0":Math.abs(t)<1e3?tn(t,0,e)+"ns":(t/=1e3,Math.abs(t)<1e3?tn(t,0,e)+"µs":(t/=1e3,Math.abs(t)<10?tn(t,1,e)+"ms":Math.abs(t)<1e3?tn(t,0,e)+"ms":(t/=1e3,Math.abs(t)<100?tn(t,1,e)+"s":(t/=60,Math.abs(t)<100?tn(t,1,e)+"m":Math.abs(t)<100?en(t,0,e)+"m":(t/=60,Math.abs(t)<10?en(t,1,e)+"h":en(t,0,e)+"h")))))}function ln(t){switch(t){case Fa.Percents:return nn;case Fa.Nanoseconds:return un;case Fa.Bytes:return on;default:return cn}}function cn(t){return void 0===t?"<missing>":""===t?"<empty>":"number"===typeof t?an(t):String(t)}function dn(){return{animation:!1,textStyle:{fontFamily:'"Roboto", sans-serif'},toolbox:{show:!1},dataZoom:[{type:"inside",disabled:!0}],legend:[],grid:[],xAxis:[],yAxis:[],dataset:[],series:[],tooltip:[]}}function pn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.tooltip.push(Object(rt["a"])({trigger:"axis",appendToBody:!0,axisPointer:{type:"cross",link:[{xAxisIndex:"all"}]}},e))}function vn(t){return function(e){var a,n=[],r=Object(i["a"])(e);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=Object(u["truncate"])(o.seriesName,{length:60}),l=o.value[o.encode.y[0]];if(n.push("<tr>"+"<td>".concat(o.marker,"</td>")+"<td>".concat(s,"</td>")+"<td>".concat(t(l),"</td>")+"</tr>"),20===n.length)break}}catch(d){r.e(d)}finally{r.f()}var c=['<div class="chart-tooltip">',"<table>","<tbody>",n.join(""),"</tbody>","</table>","</div"];return c.join("")}}var mn=Object(r["defineComponent"])({name:"SparklineChart",components:{EChart:Ua},props:{name:{type:String,required:!0},line:{type:Array,required:!0},time:{type:Array,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){var e={width:100,height:30},a=dn();return pn(a,{axisPointer:void 0,formatter:vn(ln(Qa(t.name)))}),a.grid.push({show:!0,top:2,left:2,right:2,height:27,borderWidth:0}),a.xAxis.push({type:"time",show:!0,axisLine:{lineStyle:{color:Ea["a"].grey.lighten2}},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1}}),a.yAxis.push({type:"value",show:!1}),fn(a,t.name,t.line,t.time),e.option=a,e}));return{chart:e}}});function fn(t,e,a,n){t.dataset.push({source:Object(ot["a"])({time:n},e,a)});var r=Ea["a"].blue.base;t.series.push({type:"line",name:e,encode:{x:"time",y:e},showSymbol:!1,lineStyle:{width:1},itemStyle:{color:r},areaStyle:{color:new Ia["a"].LinearGradient(0,0,0,1,[{offset:0,color:r},{offset:1,color:"#ffe"}])}})}var bn=mn,hn=Object(h["a"])(bn,Ta,Ra,!1,null,"e8f6d994",null),gn=hn.exports,yn=Object(r["defineComponent"])({name:"OverviewTable",components:{ThOrder:Pa,SparklineChart:gn},props:{dateRange:{type:Object,required:!0},loading:{type:Boolean,required:!0},items:{type:Array,default:function(){return[]}},order:{type:Object,required:!0},column:{type:String,default:""},baseColumnRoute:{type:Object,default:void 0}},setup:function(t){function e(e){var a;a=""===e?"".concat(t.column," does not exist"):"".concat(t.column," = ").concat(la(e));var n=Object(rt["a"])({},t.baseColumnRoute);return n.query=Object(rt["a"])(Object(rt["a"])({},n.query),{},{where:a}),n}function a(e){return{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.dateRange.queryParams()),{},{system:e})}}return{xkey:ea,columnRoute:e,groupListRoute:a,percent:nn}}}),xn=yn,On=(a("c05d"),a("755a")),_n=a("1556"),jn=Object(h["a"])(xn,ja,Ca,!1,null,null,null),Cn=jn.exports;y()(jn,{VProgressLinear:On["a"],VSimpleTable:_n["a"]});var wn=Object(r["defineComponent"])({name:"SystemOverview",components:{OverviewTable:Cn},props:{dateRange:{type:Object,required:!0}},setup:function(t){var e=Oa(t.dateRange),a=Object(r["computed"])((function(){return{name:"GroupList",query:{system:ea.allSystem,query:ha(ea.spanSystem)}}}));return{xkey:ea,systems:e,exploreRoute:a}}}),kn=wn,Sn=(a("1775"),a("4663")),Vn=a("d4eb"),qn=a("2c70"),Pn=Object(h["a"])(kn,aa,na,!1,null,null,null),Tn=Pn.exports;y()(Pn,{VBtn:L["a"],VCard:ue["a"],VCardText:le["b"],VSlideGroup:Sn["b"],VSlideItem:Vn["a"],VSpacer:W["a"],VToolbar:qn["a"],VToolbarTitle:We["a"]});var Rn=Object(r["defineComponent"])({name:"Overview",components:{DateRangePicker:Re,HelpCard:ta,SystemOverview:Tn},setup:function(){Object(nt["useTitle"])("Overview");var t=Tt(),e=At(t);return{dateRange:t,systems:e}}}),In=Rn,En=Object(h["a"])(In,et,at,!1,null,"ef3352a6",null),Dn=En.exports;y()(En,{VCol:X["a"],VContainer:H["a"],VRow:Q["a"],VSpacer:W["a"]});var Ln=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XPlaceholder",{scopedSlots:t._u([t.systems.hasNoData?{key:"placeholder",fn:function(){return[a("HelpCard",{attrs:{"date-range":t.dateRange,loading:t.systems.loading}})]},proxy:!0}:null],null,!0)},[a("div",[a("v-container",{staticClass:"pb-0",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-row",{staticClass:"mb-4",attrs:{align:"center",justify:"space-between"}},[a("v-col",{attrs:{cols:"auto"}},[a("SystemPicker",{attrs:{"date-range":t.dateRange,systems:t.systems}})],1),a("v-col",{attrs:{cols:"auto"}},[a("DateRangePicker",{attrs:{"date-range":t.dateRange}})],1)],1)],1)],1),a("v-container",{staticClass:"pt-2",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("UptraceQuery",{staticClass:"mb-1",attrs:{uql:t.uql}},[a("SpanFilters",{attrs:{uql:t.uql,systems:t.systems,"axios-params":t.axiosParams}})],1),a("GroupList",{attrs:{"date-range":t.dateRange,systems:t.systems,uql:t.uql,"axios-params":t.axiosParams}})],1)],1)},Mn=[],Nn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g(t._b({staticStyle:{"text-transform":"none"}},"v-btn",t.attrs,!1),n),[a("span",{staticClass:"px-4"},[t._v(t._s(t.systems.activeValue||"Choose system"))]),a("v-icon",{attrs:{right:"",size:"24"}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("SystemList",{attrs:{"date-range":t.dateRange,systems:t.systems,"max-height":t.maxHeight},on:{"click:item":function(e){t.menu=!1}}})],1)},$n=[],Bn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:"","max-height":t.maxHeight}},[a("v-list",{attrs:{dense:""}},[t._l(t.systems.tree,(function(e){return[e.children?a("v-menu",{key:e.system,attrs:{"open-on-hover":"","offset-x":"",transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[a("v-list-item",t._g(t._b({attrs:{to:t.systemRoute(e.system),exact:""}},"v-list-item",o,!1),r),[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.system))])],1),a("v-list-item-icon",{staticClass:"align-self-center"},[a("v-icon",[t._v("mdi-menu-right")])],1)],1)]}}],null,!0)},[a("v-card",{attrs:{flat:"","max-height":t.maxHeight}},[a("v-list",{attrs:{dense:""}},t._l(e.children,(function(e){return a("v-list-item",{key:e.system,attrs:{to:t.systemRoute(e.system),exact:""},on:{click:function(e){return t.$emit("click:item")}}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.system))])],1)],1)})),1)],1)],1):a("v-list-item",{key:e.system,attrs:{to:t.systemRoute(e.system),exact:""}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.system))])],1)],1)]}))],2)],1)},An=[],Fn=Object(r["defineComponent"])({name:"SystemList",props:{dateRange:{type:Object,required:!0},systems:{type:Object,required:!0},maxHeight:{type:Number,default:420}},setup:function(t){var e=c(),a=e.route;function n(e){return{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.dateRange.queryParams()),{},{system:e,query:a.value.query.query})}}return{systemRoute:n}}}),Gn=Fn,Xn=a("27e2"),Hn=Object(h["a"])(Gn,Bn,An,!1,null,"4b20b67b",null),Un=Hn.exports;y()(Hn,{VCard:ue["a"],VIcon:de["a"],VList:te["a"],VListItem:ee["a"],VListItemContent:ae["b"],VListItemIcon:Xn["a"],VListItemTitle:ae["c"],VMenu:ye["a"]});var Qn=Object(r["defineComponent"])({name:"SystemPicker",components:{SystemList:Un},props:{dateRange:{type:Object,required:!0},systems:{type:Object,required:!0},outlined:{type:Boolean,default:!1},maxHeight:{type:Number,default:420}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["computed"])((function(){return t.outlined?{outlined:!0}:{dark:!0,class:"blue darken-1 elevation-5"}}));return d().sync({fromQuery:function(e){e.system&&t.systems.change(e.system)},toQuery:function(){if(t.systems.activeValue)return{system:t.systems.activeValue}}}),Object(r["watch"])((function(){return t.systems.list}),(function(){t.systems.activeItem||t.systems.list.length&&t.systems.change(t.systems.list[0].system)}),{immediate:!0}),{menu:e,attrs:a}}}),Wn=Qn,zn=Object(h["a"])(Wn,Nn,$n,!1,null,"0a64f944",null),Kn=zn.exports;y()(zn,{VBtn:L["a"],VIcon:de["a"],VMenu:ye["a"]});var Jn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{staticClass:"mb-n1",attrs:{"no-gutters":"",align:"center"}},[a("v-col",[a("div",{staticClass:"d-flex filters"},[t._t("default")],2)]),a("v-col",{attrs:{cols:"auto"}},[a("SpanQueryHelpDialog",{staticClass:"mr-2",attrs:{uql:t.uql}})],1),a("v-col",{attrs:{cols:"auto"}},[t.uql.rawMode?a("v-btn",{attrs:{icon:"",title:"Apply filters"},on:{click:function(e){return t.exitRawMode(!0)}}},[a("v-icon",{attrs:{size:"26",color:"success"}},[t._v("mdi-check")])],1):t._e(),a("v-btn",{attrs:{icon:"",title:"Cancel editing"},on:{click:function(e){t.uql.rawMode=!t.uql.rawMode}}},[t.uql.rawMode?a("v-icon",{attrs:{size:"22"}},[t._v("mdi-pencil-off-outline")]):a("v-icon",{attrs:{size:"22"}},[t._v("mdi-pencil-outline")])],1)],1)],1),a("v-row",{attrs:{align:"center",dense:""}},[t.uql.rawMode?a("v-col",[a("v-textarea",{attrs:{hint:"Press ENTER to apply filters and ESC to cancel editing","permanent-hint":"",rows:"1",outlined:"",clearable:"","auto-grow":"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation(),e.preventDefault()},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.preventDefault(),t.exitRawMode(!0))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),e.preventDefault(),t.exitRawMode(!1))}]},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1):t.uql.parts.length?a("v-col",{staticClass:"d-flex flex-wrap align-start"},[t._l(t.uql.parts,(function(e,n){return[e.editMode?a("div",{key:e.query,staticClass:"mr-2 d-inline-block"},[a("v-text-field",{attrs:{"error-messages":e.error,outlined:"",dense:"","hide-details":"auto",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation(),e.preventDefault()},keydown:[function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.stopPropagation(),a.preventDefault(),t.uql.exitEditMode(e,!0))},function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:(a.stopPropagation(),a.preventDefault(),t.uql.exitEditMode(e,!1))}],blur:function(a){return t.uql.exitEditMode(e,!0)}},model:{value:e.editQuery,callback:function(a){t.$set(e,"editQuery",a)},expression:"part.editQuery"}})],1):a("div",{key:e.query,staticClass:"mr-2 mb-1 d-inline-block"},[a("v-chip",{attrs:{label:"",color:"grey lighten-4"},on:{click:function(a){return t.uql.enterEditMode(e)}}},[t._t("part",(function(){return[a("span",[t._v(t._s(e.query))]),a("v-icon",{attrs:{right:""},on:{click:function(e){return t.uql.removeAt(n)}}},[t._v("mdi-close")])]}),{part:e})],2),e.error?a("div",{staticClass:"text-caption text-no-wrap red--text text--darken-2"},[t._v(" "+t._s(e.error)+" ")]):t._e()],1)]}))],2):a("v-col",{staticClass:"mb-1 px-3 text-body-2 grey--text text--darken-2"},[t._v(" Empty query... ")])],1)],1)},Zn=[],Yn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v("mdi-help-circle-outline")])],1),a("v-dialog",{attrs:{"max-width":1280},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",color:"blue lighten-5"}},[a("v-toolbar-title",[t._v("Querying")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close")])],1)],1),a("v-card-text",{staticClass:"py-4"},[a("p",{staticClass:"grey--text text--darken-4"},[t._v(" Uptrace supports SQL-like language to filter, group, and aggregate span "),a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/attributes/",target:"_blank"}},[t._v("attributes")]),t._v(". ")]),a("v-simple-table",[a("thead",{staticClass:"v-data-table-header"},[a("tr",[a("th",[t._v("Query")]),a("th",[t._v("Comment")])])]),a("tbody",[a("tr",[a("td",[a("UqlChip",{attrs:{uql:t.uql,column:"span.name",op:"contains",value:"get|post"},on:{click:function(e){t.dialog=!1}}})],1),a("td",[t._v('Filter span names that contain "get" or "post" (case-insensitive).')])]),a("tr",[a("td",[a("UqlChip",{attrs:{uql:t.uql,query:"group by span.group_id | avg(span.duration) | where span.duration > 10ms and span.duration < 50ms"},on:{click:function(e){t.dialog=!1}}})],1),a("td",[t._v("Filter span duration.")])]),a("tr",[a("td",[a("UqlChip",{attrs:{uql:t.uql,query:"group by host.name | p50(span.duration)"},on:{click:function(e){t.dialog=!1}}})],1),a("td",[t._v("Select median span duration for each host name.")])]),a("tr",[a("td",[a("UqlChip",{attrs:{uql:t.uql,query:"group by span.group_id | where span.event_count > 0"},on:{click:function(e){t.dialog=!1}}})],1),a("td",[t._v("Select spans with events for each group.")])])])])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),a("v-btn",{attrs:{text:"",color:"primary",href:"https://docs.uptrace.dev/guide/querying.html",target:"_blank"}},[t._v("Read more")])],1)],1)],1)],1)},tr=[],er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tooltip",{attrs:{disabled:!t.tooltip,top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-chip",t._g(t._b({attrs:{label:"",color:"grey lighten-4"},on:{click:t.apply}},"v-chip",r,!1),n),[t._v(" "+t._s(t.text)+" ")])]}}])},[t._v(" "+t._s(t.tooltip)+" ")])},ar=[],nr=Object(r["defineComponent"])({name:"UqlChip",props:{uql:{type:Object,required:!0},column:{type:String,default:""},group:{type:String,default:""},op:{type:String,default:""},value:{type:void 0,default:void 0},query:{type:String,default:""},tooltip:{type:String,default:void 0}},setup:function(t,e){var a=Object(r["computed"])((function(){if(t.group)return t.group;if(t.column){var e=[t.column,t.op];return t.value&&e.push(la(t.value)),e.join(" ")}return t.query?t.query:""}));function n(){if(e.emit("click"),t.group){var a=t.uql.createEditor();return a.replaceGroupBy(t.group),void t.uql.commitEdits(a)}if(t.column&&!t.op)return o(t.column);if(t.column&&t.op){var n=t.uql.createEditor();return n.where(t.column,t.op,t.value),void t.uql.commitEdits(n)}t.query&&(t.uql.query=t.query)}function o(e){var a=t.uql.createEditor();a.add(e),t.uql.commitEdits(a)}return{text:a,apply:n}}}),rr=nr,or=a("c0ee"),sr=a("c470"),ir=Object(h["a"])(rr,er,ar,!1,null,"3117a298",null),ur=ir.exports;y()(ir,{VChip:or["a"],VTooltip:sr["a"]});var lr=Object(r["defineComponent"])({name:"SpanQueryHelpDialog",components:{UqlChip:ur},props:{uql:{type:Object,required:!0}},setup:function(){var t=Object(r["ref"])(!1);return{dialog:t}}}),cr=lr,dr=(a("adf7"),a("6b3e")),pr=Object(h["a"])(cr,Yn,tr,!1,null,"7da06156",null),vr=pr.exports;y()(pr,{VBtn:L["a"],VCard:ue["a"],VCardActions:le["a"],VCardText:le["b"],VDialog:dr["a"],VIcon:de["a"],VSimpleTable:_n["a"],VSpacer:W["a"],VToolbar:qn["a"],VToolbarTitle:We["a"]});var mr=Object(r["defineComponent"])({name:"UptraceQuery",components:{SpanQueryHelpDialog:vr},props:{uql:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])("");function a(a){t.uql.rawMode=!1,a&&(t.uql.query=e.value)}return Object(r["watch"])((function(){return t.uql.query}),(function(t){e.value=t}),{immediate:!0}),{query:e,exitRawMode:a}}}),fr=mr,br=(a("d502"),a("8784"),a("1d82")),hr=Object(h["a"])(fr,Jn,Zn,!1,null,"19f392aa",null),gr=hr.exports;y()(hr,{VBtn:L["a"],VChip:or["a"],VCol:X["a"],VIcon:de["a"],VRow:Q["a"],VTextField:J["a"],VTextarea:br["a"]});var yr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"frag",rawName:"v-frag"}]},[a("SearchFilterMenu",{attrs:{uql:t.uql}}),a("DurationFilterMenu",{attrs:{uql:t.uql}}),a("AttrFilterMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams,"attr-key":t.xkey.spanStatusCode,label:"Status"}}),a("AttrFilterMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams,"attr-key":t.xkey.spanKind,label:"Kind"}}),a("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),a("WhereFilterMenu",{attrs:{systems:t.systems,uql:t.uql,"axios-params":t.axiosParams}}),a("AggFilterMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams}}),a("GroupByMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams}}),a("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),a("v-btn",{staticClass:"v-btn--filter",attrs:{text:""},on:{click:t.reset}},[t._v("Reset")])],1)},xr=[],Or=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v("Search")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.addFilter.apply(null,arguments)}}},[a("v-card",{attrs:{width:"400"}},[a("v-card-text",{staticClass:"pa-6"},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"Contains substr1|substr2|substr3",hint:'Case-insensitive options separated with "|"',"persistent-hint":"",filled:"",dense:"",autofocus:""},model:{value:t.attrValue,callback:function(e){t.attrValue=e},expression:"attrValue"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:!t.attrValue.length}},[t._v("Filter")])],1)],1)],1)],1)],1)],1)},_r=[],jr=Object(r["defineComponent"])({name:"SearchFilterMenu",props:{uql:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])("");function n(){var n=la(a.value),r=t.uql.createEditor();r.add("where ".concat(ea.spanName," contains ").concat(n)),t.uql.commitEdits(r),e.value=!1}return{xkey:ea,menu:e,attrValue:a,addFilter:n}}}),Cr=jr,wr=(a("4a99"),a("b148")),kr=Object(h["a"])(Cr,Or,_r,!1,null,"75636ea2",null),Sr=kr.exports;y()(kr,{VBtn:L["a"],VCard:ue["a"],VCardText:le["b"],VCol:X["a"],VForm:wr["a"],VIcon:de["a"],VMenu:ye["a"],VRow:Q["a"],VSpacer:W["a"],VTextField:J["a"]});var Vr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v("Dur.")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.addFilter.apply(null,arguments)}}},[a("v-card",{attrs:{width:"360px"}},[a("v-card-text",{staticClass:"py-6"},[a("v-row",{staticClass:"mb-n4",attrs:{align:"center"}},[a("v-col",[a("v-text-field",{attrs:{type:"number",min:"0",label:">= duration",suffix:"ms",outlined:"",dense:"",autofocus:"","hide-details":"auto"},model:{value:t.gte,callback:function(e){t.gte=e},expression:"gte"}})],1),a("v-col",{staticClass:"px-0",attrs:{cols:"auto"}},[t._v("AND")]),a("v-col",[a("v-text-field",{attrs:{type:"number",min:t.gte+1,label:"< duration",suffix:"ms",outlined:"",dense:"","hide-details":"auto"},model:{value:t.lt,callback:function(e){t.lt=e},expression:"lt"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{type:"submit",color:"primary",disabled:!t.isValid}},[t._v("Filter")])],1)],1)],1)],1)],1)],1)},qr=[],Pr=Object(r["defineComponent"])({name:"DurationFilterMenu",props:{uql:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(),o=Object(r["computed"])((function(){return a.value||n.value}));function s(){if(o.value){var r=t.uql.createEditor();a.value&&r.replaceOrPush(/^where\s+span\.duration\s+>=\s.+$/i,"where ".concat(ea.spanDuration," >= ").concat(a.value,"ms")),n.value&&r.replaceOrPush(/^where\s+span\.duration\s+<\s.+$/i,"where ".concat(ea.spanDuration," < ").concat(n.value,"ms")),t.uql.commitEdits(r),e.value=!1,a.value=void 0,n.value=void 0}else e.value=!1}return{menu:e,gte:a,lt:n,isValid:o,addFilter:s}}}),Tr=Pr,Rr=Object(h["a"])(Tr,Vr,qr,!1,null,"2ccaf884",null),Ir=Rr.exports;y()(Rr,{VBtn:L["a"],VCard:ue["a"],VCardText:le["b"],VCol:X["a"],VForm:wr["a"],VIcon:de["a"],VMenu:ye["a"],VRow:Q["a"],VSpacer:W["a"],VTextField:J["a"]});var Er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v(t._s(t.label))]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("XList",{attrs:{loading:t.suggestions.loading,items:t.suggestions.filteredItems,"num-item":t.suggestions.items.length,"search-input":t.suggestions.searchInput,"return-object":""},on:{"update:searchInput":function(e){return t.$set(t.suggestions,"searchInput",e)},"update:search-input":function(e){return t.$set(t.suggestions,"searchInput",e)},input:function(e){return t.addFilter(e.text,"=")}},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(t.truncate(n.text,{length:60}))+" ")])],1),a("v-list-item-action",{staticClass:"my-0",on:{click:function(e){return e.stopPropagation(),t.addFilter(n.text,"!=")}}},[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-not-equal")])],1)],1)]}}])})],1)},Dr=[];function Lr(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r["shallowRef"])(""),o=null!==(e=a.suggestSearchInput)&&void 0!==e&&e,s=Bt((function(){return t()})),i=s.loading,u=s.data,l=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=u.value)||void 0===e?void 0:e.suggestions)&&void 0!==t?t:[]})),c=Object(r["computed"])((function(){var t=l.value.slice();if(!n.value)return t;if(t=t.filter((function(t){return t.text.indexOf(n.value)>=0})),o){var e={text:n.value};t.length<=5?t.push(e):t.unshift(e)}return t}));return Object(r["proxyRefs"])({searchInput:n,loading:i,data:u,items:l,filteredItems:c})}var Mr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{attrs:{"max-height":"320",loading:t.loading}},[a("XPlaceholder",{scopedSlots:t._u([t.loading?{key:"placeholder",fn:function(){return[a("v-skeleton-loader",{attrs:{width:"200",type:"list-item@3",loading:""}})]},proxy:!0}:t.items.length?null:{key:"placeholder",fn:function(){return[a("v-card-text",[t._v("There are no any suggestions.")])]},proxy:!0}],null,!0)},[t.showFilter?a("v-card-text",{staticClass:"mb-n2"},[a("v-text-field",{attrs:{placeholder:"Filter",outlined:"",dense:"","hide-details":"auto",autofocus:"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1):t._e(),a("v-list",{attrs:{dense:""}},t._l(t.filteredItems,(function(e){return a("v-list-item",{key:e.value,on:{click:function(a){return t.onClick(e)}}},[t._t("item",(function(){return[a("v-list-item-content",[a("v-list-item-title",{staticStyle:{"text-overflow":"clip"}},[t._v(" "+t._s(t.truncate(e.text,{length:80}))+" ")])],1)]}),{item:e})],2)})),1)],1)],1)},Nr=[],$r=Object(r["defineComponent"])({name:"XList",props:{loading:{type:Boolean,default:!1},items:{type:Array,required:!0},numItem:{type:Number,default:void 0},searchInput:{type:String,default:""},returnObject:{type:Boolean,default:!1}},setup:function(t,e){var a=Object(r["shallowRef"])(""),n=Object(r["computed"])((function(){return t.items.map((function(t){return"string"===typeof t?{text:t,value:t}:t}))})),o=Object(r["computed"])((function(){var t=n.value.slice();return a.value?t.filter((function(t){return t.text.indexOf(a.value)>=0})):t})),s=Object(r["computed"])((function(){return t.numItem?t.numItem>10:t.items.length>10}));function i(a){t.returnObject?e.emit("input",a):e.emit("input",a.value)}return Object(r["watch"])((function(){return t.searchInput}),(function(t){a.value=t}),{immediate:!0}),Object(r["watch"])(a,(function(t){e.emit("update:searchInput",t)})),{search:a,filteredItems:o,showFilter:s,onClick:i,truncate:u["truncate"]}}}),Br=$r,Ar=a("712d"),Fr=Object(h["a"])(Br,Mr,Nr,!1,null,"bea19ccc",null),Gr=Fr.exports;y()(Fr,{VCardText:le["b"],VList:te["a"],VListItem:ee["a"],VListItemContent:ae["b"],VListItemTitle:ae["c"],VSheet:Xa["a"],VSkeletonLoader:Ar["a"],VTextField:J["a"]});var Xr=Object(r["defineComponent"])({name:"AttrFilterMenu",components:{XList:Gr},props:{uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0},attrKey:{type:String,required:!0},label:{type:String,required:!0}},setup:function(t,e){var a=Object(r["shallowRef"])(!1),n=Lr((function(){return a.value?{url:"/api/tracing/suggestions/values",params:Object(rt["a"])(Object(rt["a"])({},t.axiosParams),{},{column:t.attrKey})}:null}));function o(n,r){var o=t.uql.createEditor();o.where(t.attrKey,r,n),t.uql.commitEdits(o),a.value=!1,e.emit("change")}return{menu:a,suggestions:n,addFilter:o,truncate:u["truncate"]}}}),Hr=Xr,Ur=a("0a8a"),Qr=Object(h["a"])(Hr,Er,Dr,!1,null,"0807ed0e",null),Wr=Qr.exports;y()(Qr,{VBtn:L["a"],VIcon:de["a"],VListItemAction:Ur["a"],VListItemContent:ae["b"],VListItemTitle:ae["c"],VMenu:ye["a"]});var zr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v("Where")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-card",{staticClass:"pa-3"},[a("v-row",[a("v-col",{attrs:{cols:"auto"}},[a("v-form",{ref:"form",staticClass:"pa-3",staticStyle:{width:"400px"},model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[a("v-row",[a("v-col",{staticClass:"grey--text text--darken-3"},[t._v("For example, "),a("strong",[t._v("where span.duration > 100ms")]),t._v(".")])],1),a("v-row",{staticClass:"mb-n3"},[a("v-col",{staticClass:"pt-4 pr-2",attrs:{cols:"auto"}},[a("v-avatar",{attrs:{color:"grey",size:"30"}},[a("span",{staticClass:"white--text text-h6"},[t._v("1")])])],1),a("v-col",[a("SimpleSuggestions",{staticClass:"fit",attrs:{loading:t.columnSuggestions.loading,suggestions:t.columnSuggestions,rules:t.rules.column,label:"Column",dense:""},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}})],1)],1),a("v-row",{staticClass:"mb-n3"},[a("v-col",{staticClass:"pt-4 pr-2",attrs:{cols:"auto"}},[a("v-avatar",{attrs:{color:"grey",size:"30"}},[a("span",{staticClass:"white--text text-h6"},[t._v("2")])])],1),a("v-col",[a("v-autocomplete",{staticClass:"fit",staticStyle:{width:"200px"},attrs:{rules:t.rules.op,label:"Operator",items:t.opItems,outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.op,callback:function(e){t.op=e},expression:"op"}})],1)],1),a("v-row",[a("v-col",{staticClass:"pt-4 pr-2",attrs:{cols:"auto"}},[a("v-avatar",{attrs:{color:"grey",size:"30"}},[a("span",{staticClass:"white--text text-h6"},[t._v("3")])])],1),a("v-col",[a("SimpleSuggestions",{staticClass:"fit",attrs:{loading:t.valueSuggestions.loading,suggestions:t.valueSuggestions,rules:t.rules.colValue,label:"Value",placeholder:t.valuePlaceholder,hint:t.valueHint,disabled:t.valueDisabled,dense:""},model:{value:t.colValue,callback:function(e){t.colValue=e},expression:"colValue"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"primary",attrs:{disabled:!t.isValid},on:{click:t.addFilter}},[t._v("Filter")])],1)],1)],1)],1),t.lcAttrs.length?[a("v-col",{attrs:{cols:"auto"}},[a("v-divider",{attrs:{vertical:""}})],1),a("v-col",{staticClass:"pa-4",attrs:{cols:"auto"}},t._l(t.lcAttrs,(function(e){return a("div",{key:e},[a("AttrFilterMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams,"attr-key":e,label:e},on:{change:function(e){t.menu=!1}}})],1)})),0)]:t._e()],2)],1)],1)},Kr=[],Jr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-combobox",t._b({staticClass:"pt-0",attrs:{value:t.value,"persistent-hint":"",loading:t.loading,items:t.suggestions.filteredItems,"search-input":t.suggestions.searchInput,"return-object":"","no-filter":"","auto-select-first":"",clearable:"",outlined:"","hide-details":"auto"},on:{"update:searchInput":function(e){return t.$set(t.suggestions,"searchInput",e)},"update:search-input":function(e){return t.$set(t.suggestions,"searchInput",e)},input:t.onInput},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.truncate(n.text,{length:60})))])],1),n.hint?a("v-list-item-action",[a("v-list-item-action-text",[t._v(t._s(n.hint))])],1):t._e()]}}])},"v-combobox",t.$attrs,!1))},Zr=[],Yr=Object(r["defineComponent"])({name:"SimpleSuggestions",props:{loading:{type:Boolean,default:!1},value:{type:Object,default:void 0},suggestions:{type:Object,required:!0}},setup:function(t,e){var a=e.emit;function n(t){"string"===typeof t&&(t={text:t}),a("input",t)}return{onInput:n,truncate:u["truncate"]}}}),to=Yr,eo=a("0c1c"),ao=Object(h["a"])(to,Jr,Zr,!1,null,"a5dbcd36",null),no=ao.exports;y()(ao,{VCombobox:eo["a"],VListItemAction:Ur["a"],VListItemActionText:ae["a"],VListItemContent:ae["b"],VListItemTitle:ae["c"]});var ro=function(t){return t&&0!=t.length||"Field is required"};var oo={contains:"contains",doesNotContain:"does not contain",like:"like",notLike:"not like",exists:"exists",doesNotExist:"does not exist"},so=Object(r["defineComponent"])({name:"WhereFilterMenu",components:{AttrFilterMenu:Wr,SimpleSuggestions:no},props:{systems:{type:Object,required:!0},uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(""),o=Object(r["shallowRef"])(),s=Object(r["shallowRef"])(),i=Object(r["shallowRef"])(!1),u={column:[ro],op:[ro],colValue:[]},l=Lr((function(){return e.value?{url:"/api/tracing/suggestions/attributes",params:t.axiosParams}:null}),{suggestSearchInput:!0}),c=Object(r["computed"])((function(){var t=[ea.serviceName,ea.hostName,ea.codeFilepath,ea.codeFunction,ea.rpcMethod,ea.httpMethod,ea.httpStatusCode];return l.items.filter((function(e){return t.indexOf(e.text)>=0})).map((function(t){return t.text})).sort((function(e,a){return t.indexOf(e)-t.indexOf(a)}))})),d=Object(r["computed"])((function(){return["=","!=","<","<=",">",">=",oo.contains,oo.doesNotContain,oo.like,oo.notLike,oo.exists,oo.doesNotExist]})),p=Lr((function(){if(e.value&&a.value&&a.value.text)return{url:"/api/tracing/suggestions/values",params:Object(rt["a"])(Object(rt["a"])({},t.axiosParams),{},{column:a.value.text})}}),{suggestSearchInput:!0}),v=Object(r["computed"])((function(){switch(n.value){case oo.like:case oo.notLike:return"%substring% or %suffix or prefix%";case oo.contains:case oo.doesNotContain:return"substr1|substr2|substr3";default:return""}})),m=Object(r["computed"])((function(){switch(n.value){case oo.like:case oo.notLike:return'"%" matches zero or more characters';case oo.contains:case oo.doesNotContain:return'Case-insensitive options separated with "|"';default:return""}})),f=Object(r["computed"])((function(){switch(n.value){case oo.exists:case oo.doesNotExist:return!0;default:return!1}}));function b(){setTimeout((function(){if(a.value&&n.value){var r=t.uql.createEditor();if(f.value)r.add("where ".concat(a.value.text," ").concat(n.value));else{var i,u,l=null!==(i=null===(u=o.value)||void 0===u?void 0:u.text)&&void 0!==i?i:"";r.add("where ".concat(a.value.text," ").concat(n.value," ").concat(la(l)))}t.uql.commitEdits(r),a.value=void 0,n.value="",o.value=void 0,s.value.resetValidation(),e.value=!1}}),10)}return Object(r["watch"])(f,(function(t){t&&(o.value=void 0)})),{xkey:ea,menu:e,lcAttrs:c,form:s,isValid:i,rules:u,columnSuggestions:l,opItems:d,valueSuggestions:p,valuePlaceholder:v,valueHint:m,valueDisabled:f,column:a,op:n,colValue:o,addFilter:b}}}),io=so,uo=(a("d542"),a("407f")),lo=a("e2bd"),co=a("6d62"),po=Object(h["a"])(io,zr,Kr,!1,null,"68c46dce",null),vo=po.exports;y()(po,{VAutocomplete:uo["a"],VAvatar:lo["a"],VBtn:L["a"],VCard:ue["a"],VCol:X["a"],VDivider:co["a"],VForm:wr["a"],VIcon:de["a"],VMenu:ye["a"],VRow:Q["a"],VSpacer:W["a"]});var mo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v("Agg")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.addFilter.apply(null,arguments)}},model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[a("v-card",{attrs:{width:"400px"}},[a("v-card-text",{staticClass:"py-6 text-body-2"},[a("v-row",[a("v-col",{staticClass:"no-transform space-around"},t._l(t.aggColumns,(function(e){return a("UqlChip",{key:e.name,attrs:{uql:t.uql,column:e.name,tooltip:e.tooltip},on:{click:function(e){t.menu=!1}}})})),1)],1),a("div",{staticClass:"mt-3 mb-4 d-flex align-center"},[a("v-divider"),a("div",{staticClass:"mx-2 grey--text text--lighten-1"},[t._v("or")]),a("v-divider")],1),a("v-row",{staticClass:"mb-n1"},[a("v-col",[t._v(" Select a function and then a column: "),a("strong",[t._v("func(column)")]),t._v(". ")])],1),a("v-row",{staticClass:"mb-n6",attrs:{dense:""}},[a("v-col",{attrs:{cols:5}},[a("v-autocomplete",{staticClass:"fit",attrs:{rules:t.rules.func,label:"Function",items:t.funcItems,"return-object":"",outlined:"",dense:""},model:{value:t.func,callback:function(e){t.func=e},expression:"func"}})],1),a("v-col",{attrs:{cols:7}},[a("SimpleSuggestions",{staticClass:"fit",attrs:{loading:t.suggestions.loading,suggestions:t.suggestions,label:"Column",rules:t.rules.column,disabled:!t.func||t.func.isColumn,dense:""},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:!t.isValid}},[t._v("Add column")])],1)],1)],1)],1)],1)],1)},fo=[],bo=["any","top3","top10","avg","uniq","p50","p75","p90","p95","p99","min","max","sum"],ho=[{name:ea.spanCount,tooltip:"Number of spans in a group"},{name:ea.spanCountPerMin,tooltip:"Number of spans per minute in a group"},{name:ea.spanErrorCount,tooltip:'Number of spans with span.status_code = "error"'},{name:ea.spanErrorPct,tooltip:'Percent of spans with span.status_code = "error"'},{name:"p75(".concat(ea.spanDuration,")"),tooltip:"75th percentile of span.duration"},{name:"max(".concat(ea.spanDuration,")"),tooltip:"Max span.duration"},{name:"uniq(".concat(ea.enduserId,")"),tooltip:"Number of distinct enduser.id"}],go=Object(r["defineComponent"])({name:"AggFilterMenu",components:{SimpleSuggestions:no,UqlChip:ur},props:{uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(),o=Object(r["shallowRef"])(),s=Object(r["shallowRef"])(!1),u={func:[ro],column:[v]},l=Lr((function(){var n;return e.value?{url:"/api/tracing/suggestions/attributes",params:Object(rt["a"])(Object(rt["a"])({},t.axiosParams),{},{func:null===(n=a.value)||void 0===n?void 0:n.value})}:null}),{suggestSearchInput:!0}),c=Object(r["computed"])((function(){var t,e=[],a=Object(i["a"])(bo);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.push({value:n,text:n+"(...)"})}}catch(r){a.e(r)}finally{a.f()}return e}));function d(){if(a.value&&n.value){var t="".concat(a.value.value,"(").concat(n.value.text,")");p(t),a.value=void 0,n.value=void 0,o.value.resetValidation()}}function p(a){var n=t.uql.createEditor();n.add(a),t.uql.commitEdits(n),e.value=!1}function v(t){var e=Boolean(a.value&&t);return e||"Column is required"}return{menu:e,form:o,isValid:s,rules:u,suggestions:l,aggColumns:ho,func:a,funcItems:c,column:n,addFilter:d,aggBy:p}}}),yo=go,xo=(a("9e2f"),Object(h["a"])(yo,mo,fo,!1,null,"c1eaaa0a",null)),Oo=xo.exports;y()(xo,{VAutocomplete:uo["a"],VBtn:L["a"],VCard:ue["a"],VCardText:le["b"],VCol:X["a"],VDivider:co["a"],VForm:wr["a"],VIcon:de["a"],VMenu:ye["a"],VRow:Q["a"],VSpacer:W["a"]});var _o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:"",disabled:t.disabled}},"v-btn",r,!1),n),[a("span",[t._v("Group by")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.addFilter.apply(null,arguments)}},model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[a("v-card",{attrs:{width:"400px"}},[a("v-card-text",{staticClass:"py-6"},[a("v-row",[a("v-col",{staticClass:"space-around no-transform"},t._l(t.groupColumns,(function(e){return a("UqlChip",{key:e,attrs:{uql:t.uql,group:e},on:{click:function(e){t.menu=!1}}})})),1)],1),a("div",{staticClass:"mt-2 mb-3 d-flex align-center"},[a("v-divider"),a("div",{staticClass:"mx-2 grey--text text--lighten-1"},[t._v("or")]),a("v-divider")],1),a("v-row",{staticClass:"mb-n1"},[a("v-col",[t._v("Select a grouping column.")])],1),a("v-row",{attrs:{dense:""}},[a("v-col",[a("SimpleSuggestions",{staticClass:"fit",attrs:{loading:t.suggestions.loading,suggestions:t.suggestions,rules:t.rules.column,label:"Column",dense:""},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:!t.isValid}},[t._v("Group by")])],1)],1)],1)],1)],1)],1)},jo=[],Co=[ea.spanGroupId,ea.serviceName,ea.hostName],wo=Object(r["defineComponent"])({name:"GroupByMenu",components:{SimpleSuggestions:no,UqlChip:ur},props:{uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(),o=Object(r["shallowRef"])(!1),s={column:[ro]},i=Lr((function(){return e.value?{url:"/api/tracing/suggestions/attributes",params:t.axiosParams}:null}),{suggestSearchInput:!0});function u(){a.value&&(l(a.value.text),a.value=void 0,n.value.resetValidation())}function l(a){var n=t.uql.createEditor();n.replaceGroupBy(a),t.uql.commitEdits(n),e.value=!1}return{menu:e,form:n,isValid:o,rules:s,suggestions:i,groupColumns:Co,column:a,addFilter:u}}}),ko=wo,So=(a("5fb7"),Object(h["a"])(ko,_o,jo,!1,null,"12a3e2a4",null)),Vo=So.exports;y()(So,{VBtn:L["a"],VCard:ue["a"],VCardText:le["b"],VCol:X["a"],VDivider:co["a"],VForm:wr["a"],VIcon:de["a"],VMenu:ye["a"],VRow:Q["a"],VSpacer:W["a"]});var qo=Object(r["defineComponent"])({name:"SpanFilters",components:{SearchFilterMenu:Sr,DurationFilterMenu:Ir,AttrFilterMenu:Wr,WhereFilterMenu:vo,AggFilterMenu:Oo,GroupByMenu:Vo},props:{uql:{type:Object,required:!0},systems:{type:Object,required:!0},axiosParams:{type:Object,required:!0}},setup:function(t){function e(){var e=t.uql.createEditor();e.reset(),t.uql.commitEdits(e)}return{xkey:ea,reset:e}}}),Po=qo,To=(a("ce7b"),Object(h["a"])(Po,yr,xr,!1,null,"c58aae96",null)),Ro=To.exports;y()(To,{VBtn:L["a"],VDivider:co["a"]});var Io=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",[a("v-card",{staticClass:"mb-4",attrs:{rounded:"lg",outlined:""}},[a("v-toolbar",{attrs:{flat:"",color:"light-blue lighten-5"}},[a("v-toolbar-title",[a("span",[t._v("Groups")])]),a("v-spacer"),a("div",{staticClass:"text-body-2 blue-grey--text text--darken-3"},[a("strong",[a("XNum",{attrs:{value:t.explore.pager.numItem,verbose:""}})],1),t._v(" groups ")])],1),a("v-card-text",[a("v-slide-group",{staticClass:"mb-4",attrs:{multiple:"","center-active":"","show-arrows":""},model:{value:t.activeColumns,callback:function(e){t.activeColumns=e},expression:"activeColumns"}},t._l(t.explore.plotColumns,(function(e,n){return a("v-slide-item",{key:e.name,attrs:{value:e.name},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.active,s=r.toggle;return[a("v-btn",{class:{"ml-1":n>0},staticStyle:{"text-transform":"none"},attrs:{"input-value":o,"active-class":"blue white--text",small:"",depressed:"",rounded:""},on:{click:s}},[t._v(" "+t._s(e.name)+" ")])]}}],null,!0)})})),1),a("GroupTable",{attrs:{"date-range":t.dateRange,systems:t.systems,uql:t.uql,loading:t.explore.loading,items:t.explore.pageItems,columns:t.explore.columns,"group-columns":t.explore.groupColumns,"plot-columns":t.activeColumns,order:t.explore.order,"axios-params":t.axiosParams}})],1)],1),a("XPagination",{attrs:{pager:t.explore.pager}})],1)],1)},Eo=[];function Do(t){var e,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=ga(null!==(e=n.pager)&&void 0!==e?e:{perPage:9}),s=ya(null!==(a=n.order)&&void 0!==a?a:{column:ea.spanCountPerMin,desc:!0}),i=Object(r["computed"])((function(){return t()})),l=Bt((function(){return t()})),c=l.loading,d=l.data,p=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=d.value)||void 0===e?void 0:e.groups)&&void 0!==t?t:[]})),v=Object(r["computed"])((function(){if(!s.column)return p.value;var t=Lo(s.column);return Object(u["orderBy"])(p.value,(function(e){var a=e[s.column];return t?new Date(a):a}),s.desc?"desc":"asc")})),m=Object(r["computed"])((function(){var t=v.value.slice(o.pos.start,o.pos.end);return t})),f=Object(r["computed"])((function(){var t;return null===(t=d.value)||void 0===t?void 0:t.queryParts})),b=Object(r["computed"])((function(){var t,e,a=null!==(t=null===(e=d.value)||void 0===e?void 0:e.columns)&&void 0!==t?t:[];return a})),h=Object(r["computed"])((function(){return b.value.filter((function(t){return t.isGroup}))})),g=Object(r["computed"])((function(){return b.value.filter((function(t){return t.isNum}))}));return Object(r["watch"])(p,(function(t){o.numItem=t.length}),{immediate:!0,flush:"pre"}),Object(r["proxyRefs"])({pager:o,order:s,axiosReq:i,loading:c,items:v,pageItems:m,queryParts:f,columns:b,groupColumns:h,plotColumns:g})}function Lo(t){return t===ea.spanTime||Mo(t,"time")||Mo(t,"date")}function Mo(t,e){return t.endsWith("."+e)||t.endsWith("_"+e)}var No=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-simple-table",{staticClass:"v-data-table--narrow",attrs:{dense:t.dense}},[a("colgroup",[t.hasGroupName?a("col",{staticClass:"target"}):t._e(),t.showSystemColumn?a("col"):t._e(),t._l(t.customColumns,(function(t){return a("col",{key:t.name})})),a("col")],2),t.items.length?a("thead",{staticClass:"v-data-table-header"},[a("tr",[t.hasGroupName?a("th",{staticClass:"target text-no-wrap"},[a("span",[t._v("Group Name")])]):t._e(),t.showSystemColumn?a("ThOrder",{attrs:{value:t.xkey.spanSystem,order:t.order}},[t._v("System")]):t._e(),t._l(t.customColumns,(function(e){return a("ThOrder",{key:e.name,attrs:{value:e.name,order:t.order,align:e.isNum?"center":"start"}},[a("span",[t._v(t._s(t.columnHeader(e)))])])})),t.hasTimeColumn?a("ThOrder",{attrs:{value:"max("+t.xkey.spanTime+")",order:t.order}},[t._v(" Time ")]):t._e(),a("th")],2)]):t._e(),a("thead",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[a("tr",{staticClass:"v-data-table__progress"},[a("th",{staticClass:"column",attrs:{colspan:"99"}},[a("v-progress-linear",{attrs:{height:"2",absolute:"",indeterminate:""}})],1)])]),t.items.length?t._e():a("tbody",[a("tr",{staticClass:"v-data-table__empty-wrapper"},[a("td",{attrs:{colspan:"99"}},[t._v("There are no matching groups.")])])]),a("tbody",[t._l(t.items,(function(e,n){return[a("tr",{key:n,staticClass:"cursor-pointer",on:{click:function(e){return t.groupViewer.toggle(n)}}},[t.hasGroupName?a("td",{staticClass:"target"},[a("span",[t._v(t._s(t.truncate(e[t.xkey.spanName],{length:100})))])]):t._e(),t.showSystemColumn?a("td",[a("router-link",{attrs:{to:t.systemRoute(e)},nativeOn:{click:function(t){t.stopPropagation()}}},[t._v(t._s(e[t.xkey.spanSystem]))])],1):t._e(),t._l(t.customColumns,(function(n){return a("td",{key:n.name},[n.isNum?a("div",{staticClass:"d-flex align-center justify-center"},[t.plotColumns.indexOf(n.name)>=0?a("LoadGroupSparkline",{staticClass:"mr-2",attrs:{"axios-params":t.axiosParams,where:t.groupBasedWhere(e),column:n.name}}):t._e(),a("XNum",{attrs:{value:e[n.name],name:n.name}})],1):a("span",[t._v(t._s(e[n.name]))])])})),t.hasTimeColumn?a("td",{staticClass:"text-no-wrap"},[t._t("time",(function(){return[a("XDate",{attrs:{date:e["max("+t.xkey.spanTime+")"],format:"relative"}})]}),{item:e})],2):t._e(),a("td",{staticClass:"text-center text-no-wrap"},[a("v-btn",{attrs:{icon:"",title:"Focus on this group",to:t.spanListRoute(e),exact:""},nativeOn:{click:function(t){t.stopPropagation()}}},[a("v-icon",[t._v("mdi-filter-variant")])],1),t.groupViewer.visible(n)?a("v-btn",{attrs:{icon:"",title:"Hide spans"},on:{click:function(e){return e.stopPropagation(),t.groupViewer.hide(n)}}},[a("v-icon",{attrs:{size:"30"}},[t._v("mdi-chevron-up")])],1):a("v-btn",{attrs:{icon:"",title:"View spans"},on:{click:function(e){return e.stopPropagation(),t.groupViewer.show(n)}}},[a("v-icon",{attrs:{size:"30"}},[t._v("mdi-chevron-down")])],1)],1)],2),t.groupViewer.visible(n)?a("tr",{key:n+"-spans",staticClass:"v-data-table__expanded v-data-table__expanded__content"},[a("td",{staticClass:"px-6 pt-3 pb-4",attrs:{colspan:"99"}},[a("SpanListInline",{attrs:{"date-range":t.dateRange,systems:t.systems,uql:t.uql,"axios-params":t.axiosParams,where:t.groupBasedWhere(e)}})],1)]):t._e()]}))],2)])],1)},$o=[],Bo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("SparklineChart",{attrs:{name:t.column,line:t.line,time:t.time}})},Ao=[],Fo=Object(r["defineComponent"])({name:"LoadGroupSparkline",components:{SparklineChart:gn},props:{axiosParams:{type:Object,required:!0},where:{type:String,required:!0},column:{type:String,required:!0}},setup:function(t){var e=Bt((function(){var e=t.where+" | "+t.axiosParams.query;return{url:"/api/tracing/stats",params:Object(rt["a"])(Object(rt["a"])({},t.axiosParams),{},{query:e,column:t.column})}})),a=e.data,n=Object(r["computed"])((function(){var e;return a.value&&null!==(e=a.value[t.column])&&void 0!==e?e:[]})),o=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=a.value)||void 0===e?void 0:e.time)&&void 0!==t?t:[]}));return{line:n,time:o}}}),Go=Fo,Xo=Object(h["a"])(Go,Bo,Ao,!1,null,null,null),Ho=Xo.exports,Uo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("SpanTable",t._g({staticClass:"mb-4",attrs:{"date-range":t.dateRange,loading:t.spans.loading,spans:t.spans.items,order:t.spans.order,pager:t.spans.pager}},t.listeners)),a("XPagination",{attrs:{pager:t.spans.pager}})],1)},Qo=[];function Wo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=ga(e.pager),n=ya(e.order),o=Bt((function(){var e=t();return e?(e.params=Object(rt["a"])(Object(rt["a"])(Object(rt["a"])({},e.params),n.axiosParams),a.axiosParams()),e):e})),s=o.loading,i=o.data,u=Object(r["computed"])((function(){var t,e,a=null!==(t=null===(e=i.value)||void 0===e?void 0:e.spans)&&void 0!==t?t:[];return a})),l=Object(r["computed"])((function(){var t;return null===(t=i.value)||void 0===t?void 0:t.queryParts}));return Object(r["watch"])(i,(function(t){var e;a.numItem=null!==(e=null===t||void 0===t?void 0:t.count)&&void 0!==e?e:0}),{immediate:!0,flush:"sync"}),Object(r["proxyRefs"])({pager:a,order:n,loading:s,items:u,queryParts:l})}var zo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-simple-table",{staticClass:"table-truncate-first"},[a("colgroup",[a("col"),a("col"),t._l(t.columns,(function(t){return a("col",{key:t})})),a("col"),a("col")],2),a("thead",{staticClass:"v-data-table-header"},[a("tr",[a("th",[t._v("Span Name")]),a("th"),t._l(t.columns,(function(e){return a("ThOrder",{key:e,attrs:{value:e,order:t.order}},[a("span",[t._v(t._s(e))])])})),a("ThOrder",{attrs:{value:"span.time",order:t.order}},[t._v("Time")]),a("ThOrder",{attrs:{value:"span.duration",order:t.order,align:"end"}},[a("span",[t._v("Dur.")])])],2)]),t.loading?a("thead",[a("tr",{staticClass:"v-data-table__progress"},[a("th",{staticClass:"column",attrs:{colspan:"99"}},[a("v-progress-linear",{attrs:{height:"2",absolute:"",indeterminate:""}})],1)])]):t._e(),t.spans.length?t._e():a("tbody",[a("tr",{staticClass:"v-data-table__empty-wrapper"},[a("td",{attrs:{colspan:"99"}},[t._v("There are no spans for the selected date range and filters.")])])]),a("tbody",[t._l(t.spans,(function(e){return[a("tr",{key:"a-"+e.id,staticClass:"cursor-pointer",on:{click:function(a){return t.dialog.showSpan(e)}}},[a("td",[a("span",[t._v(t._s(t.truncate(e.name,{length:100})))])]),a("td",[a("SpanChips",{attrs:{attrs:e.attrs,clickable:"click:chip"in t.$listeners},on:{"click:chip":function(e){return t.$emit("click:chip",e)}}})],1),a("td",[a("XDate",{attrs:{date:e.time,format:"relative"}})],1),a("td",{staticClass:"text-right"},[a("XDuration",{attrs:{duration:e.duration,fixed:""}})],1)])]}))],2)]),a("v-dialog",{attrs:{"max-width":"1280"},model:{value:t.dialog.dialog,callback:function(e){t.$set(t.dialog,"dialog",e)},expression:"dialog.dialog"}},[a("v-sheet",[t.dialog.activeSpan?a("SpanCard",{key:t.dialog.activeSpan[t.xkey.spanId],attrs:{"date-range":t.dateRange,span:t.dialog.activeSpan,fluid:"","show-toolbar":""}}):t._e()],1)],1)],1)},Ko=[],Jo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageToolbar",{attrs:{fluid:t.fluid}},[t.meta.external?a("v-icon",{staticClass:"mr-2"},[t._v("mdi-link-variant")]):t._e(),a("v-breadcrumbs",{attrs:{items:t.meta.breadcrumbs,divider:">",large:""},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-breadcrumbs-item",{attrs:{to:n.to,exact:n.exact}},[t._v(" "+t._s(n.text)+" ")])]}}])})],1),a("v-container",{staticClass:"py-4",attrs:{fluid:t.fluid}},[a("v-row",{staticClass:"px-4 text-body-2"},[a("v-col",[t._v(t._s(t.span.name))])],1),a("v-row",{staticClass:"px-4 text-subtitle-2 text-center",attrs:{align:"end"}},[t.span.kind?a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Kind")]),a("div",[t._v(t._s(t.span.kind))])]):t._e(),t.span.statusCode?a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Status")]),a("div",{class:{"error--text":"error"===t.span.statusCode}},[t._v(" "+t._s(t.span.statusCode)+" ")])]):t._e(),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Time")]),t.span.time?a("XDate",{attrs:{date:t.span.time,format:"full"}}):t._e()],1),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Duration")]),a("XDuration",{attrs:{duration:t.span.duration,fixed:""}})],1),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"mb-0"},[t.meta.traceRoute?a("v-btn",{attrs:{depressed:"",small:"",to:t.meta.traceRoute,exact:""}},[t._v(" View trace ")]):t._e(),"GroupList"!==t.$route.name?a("v-btn",{staticClass:"ml-2",attrs:{depressed:"",small:"",to:t.meta.groupRoute,exact:""}},[t._v(" View group ")]):t._e()],1)])],1),a("v-row",[a("v-col",[a("v-sheet",{attrs:{outlined:"",rounded:"lg"}},[a("v-tabs",{staticClass:"light-blue lighten-5",attrs:{"background-color":"transparent"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab",{attrs:{href:"#attrs"}},[t._v("Attrs")]),t.dbStmt?a("v-tab",{attrs:{href:"#dbStmt"}},[t._v("SQL")]):t._e(),t.excStacktrace?a("v-tab",{attrs:{href:"#excStacktrace"}},[t._v("Stacktrace")]):t._e(),t.span.events&&t.span.events.length?a("v-tab",{attrs:{href:"#events"}},[t._v(" Events ("+t._s(t.span.events.length)+") ")]):t._e(),t.span.groupId?a("v-tab",{attrs:{href:"#pctile"}},[t._v("Percentiles")]):t._e()],1),a("v-tabs-items",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab-item",{staticClass:"pa-4",attrs:{value:"attrs"}},[a("AttrTable",{attrs:{"date-range":t.dateRange,attrs:t.span.attrs}})],1),a("v-tab-item",{attrs:{value:"dbStmt"}},[a("XCode",{attrs:{code:t.dbStmt,language:"sql"}})],1),a("v-tab-item",{attrs:{value:"excStacktrace"}},[a("XCode",{attrs:{code:t.excStacktrace}})],1),a("v-tab-item",{attrs:{value:"events"}},[a("EventPanels",{attrs:{"date-range":t.dateRange,events:t.span.events}})],1),a("v-tab-item",{staticClass:"pa-4",attrs:{value:"pctile"}},[a("LoadPctileChart",{attrs:{"axios-params":t.axiosParams}})],1)],1)],1)],1)],1)],1)],1)},Zo=[],Yo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PctileChart",t._b({attrs:{loading:t.percentiles.loading,data:t.percentiles.data}},"PctileChart",t.$attrs,!1))},ts=[];function es(t){var e=Bt(t),a=e.loading,n=e.data,o=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.count)&&void 0!==t?t:0})),s=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.rate)&&void 0!==t?t:0})),i=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.errorCount)&&void 0!==t?t:0})),u=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.p50)&&void 0!==t?t:0})),l=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.p90)&&void 0!==t?t:0})),c=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.max)&&void 0!==t?t:0}));return Object(r["proxyRefs"])({loading:a,data:n,count:o,rate:s,errorCount:i,p50:u,p90:l,max:c})}var as=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.charts,(function(e){return a("EChart",{key:e.name,attrs:{loading:t.loading,height:e.height,option:e.option,group:t.chartGroup}})})),1)},ns=[],rs={count:Ea["a"].blue.base,rate:Ea["a"].blue.base,errorCount:Ea["a"].red.darken1,errorPct:Ea["a"].red.darken3,p50:Ea["a"].green.lighten2,p90:Ea["a"].amber.darken1,p99:Ea["a"].amber.darken3},os=Object(r["defineComponent"])({name:"PctileChart",components:{EChart:Ua},props:{loading:{type:Boolean,default:!1},data:{type:Object,default:void 0}},setup:function(t){var e=Object(r["computed"])((function(){var e=[];return t.data&&t.data.p50?(e.push(ss(t.data)),e.push(is(t.data))):e.push(ls(t.data)),e}));return{charts:e,chartGroup:Symbol()}}});function ss(t){var e=dn();pn(e,{formatter:vn(un)}),e.xAxis.push({type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}}}),e.yAxis.push({type:"value",axisLabel:{formatter:un},axisPointer:{label:{formatter:function(t){return un(t.value)}}},splitNumber:4,splitLine:{show:!1}}),e.dataset.push({source:t});for(var a=[{name:"p50",color:rs.p50},{name:"p90",color:rs.p90},{name:"p99",color:rs.p99}],n=0,r=a;n<r.length;n++){var o=r[n];t[o.name]&&e.series.push({name:o.name,type:"line",symbol:"none",itemStyle:{color:o.color},areaStyle:{color:new Ia["a"].LinearGradient(0,0,0,1,[{offset:0,color:o.color},{offset:1,color:"#ffe"}])},encode:{x:"time",y:o.name}})}return e.legend.push({type:"scroll",width:"90%",data:["p50","p90","p99"],selected:{p50:!0,p90:!0,p99:!1}}),e.grid.push({top:30,left:45,right:30,height:65}),{name:"pctile",height:100,option:e}}function is(t){var e=dn();return pn(e,{formatter:vn((function(t){return String(t)}))}),e.xAxis.push({type:"time",axisPointer:{label:{formatter:function(t){return _t(t.value)}}},splitNumber:5}),e.yAxis.push({type:"value",axisLabel:{},axisPointer:{label:{}},splitNumber:4,splitLine:{show:!1}}),t&&(e.dataset.push({source:{time:t.time,rate:t.rate}}),e.series.push({datasetIndex:e.dataset.length-1,name:"count per min",type:"line",symbol:"none",itemStyle:{color:rs.count},areaStyle:{color:new Ia["a"].LinearGradient(0,0,0,1,[{offset:0,color:rs.count},{offset:1,color:"#ffe"}])},encode:{x:"time",y:"rate"}}),us(e,t)),e.grid.push({top:15,left:45,right:30,height:60}),{name:"rate",height:100,option:e}}function us(t,e){t.dataset.push({source:{time:e.time,errorRate:e.errorRate}}),t.series.push({datasetIndex:t.dataset.length-1,name:"errors per min",type:"line",symbol:"none",itemStyle:{color:rs.errorCount},encode:{x:"time",y:"errorRate"}})}function ls(t){var e=dn();return pn(e),e.xAxis.push({type:"time",axisPointer:{label:{formatter:function(t){return _t(t.value)}}},splitNumber:5}),e.yAxis.push({type:"value",splitNumber:4,splitLine:{show:!1}}),t&&(e.dataset.push({source:{time:t.time,rate:t.rate}}),e.series.push({name:"events per min",type:"bar",itemStyle:{color:rs.count},encode:{x:"time",y:"rate"}})),e.grid.push({top:15,left:45,right:30,height:120}),{name:"rate",height:160,option:e}}var cs=os,ds=Object(h["a"])(cs,as,ns,!1,null,"495c4c38",null),ps=ds.exports,vs=Object(r["defineComponent"])({name:"LoadPctileChart",components:{PctileChart:ps},props:{axiosParams:{type:Object,required:!0}},setup:function(t){var e=es((function(){return{url:"/api/tracing/percentiles",params:t.axiosParams}}));return{percentiles:e}}}),ms=vs,fs=Object(h["a"])(ms,Yo,ts,!1,null,"6845ab80",null),bs=fs.exports,hs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-simple-table",{staticClass:"v-data-table--border table-scroll-target"},[a("colgroup",[a("col"),a("col")]),a("thead",{staticClass:"v-data-table-header"},[a("tr",[a("th",[t._v("Key")]),a("th",{staticClass:"target"},[t._v("Value")])])]),t.attrKeys.length?t._e():a("tbody",[a("tr",{staticClass:"v-data-table__empty-wrapper"},[a("td",{attrs:{colspan:"99"}},[t._v("There are no attributes matching the filters.")])])]),a("tbody",t._l(t.attrKeys,(function(e){return a("tr",{key:e},[a("th",[t._v(t._s(e))]),a("td",[a("XText",{attrs:{name:e,value:t.attrs[e]}})],1)])})),0)])],1)},gs=[],ys=Object(r["defineComponent"])({name:"AttrTable",props:{attrs:{type:Object,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){var e=Object.keys(t.attrs).filter((function(t){switch(t){case ea.spanId:case ea.spanTraceId:case ea.spanGroupId:case ea.spanSystem:case ea.spanName:case ea.spanKind:case ea.spanTime:case ea.spanDuration:case ea.spanStatusCode:return!1;default:return!0}}));return e.sort(),e}));return{xkey:ea,attrKeys:e}}}),xs=ys,Os=Object(h["a"])(xs,hs,gs,!1,null,"6dd640d6",null),_s=Os.exports;y()(Os,{VSimpleTable:_n["a"]});var js=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-expansion-panels",{attrs:{flat:t.flat,multiple:""},model:{value:t.panels,callback:function(e){t.panels=e},expression:"panels"}},t._l(t.events,(function(e,n){return a("v-expansion-panel",{key:n},[a("v-expansion-panel-header",{staticClass:"user-select-text"},[a("span",[a("XDate",{staticClass:"mr-5 text-caption",attrs:{date:e.time,format:"time"}}),a("span",[t._v(t._s(e.name))])],1)]),a("v-expansion-panel-content",[a("EventPanelContent",{attrs:{"date-range":t.dateRange,event:e}})],1)],1)})),1)},Cs=[],ws=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._e(),a("AttrTable",{staticClass:"mt-4",attrs:{"date-range":t.dateRange,attrs:t.event.attrs}})],1)},ks=[],Ss=Object(r["defineComponent"])({name:"EventPanelContent",components:{PctileChart:ps,AttrTable:_s},props:{dateRange:{type:Object,required:!0},event:{type:Object,required:!0}},setup:function(t){var e=es((function(){return{url:"/api/v1/tracing/percentiles",params:Object(rt["a"])({group_id:void 0},t.dateRange.axiosParams())}}));return{percentiles:e}}}),Vs=Ss,qs=Object(h["a"])(Vs,ws,ks,!1,null,"5ac28304",null),Ps=qs.exports,Ts=Object(r["defineComponent"])({name:"EventPanels",components:{EventPanelContent:Ps},props:{dateRange:{type:Object,required:!0},events:{type:Array,required:!0},flat:{type:Boolean,default:!1}},setup:function(t,e){var a=e.emit,n=Object(r["ref"])([]);return Object(r["watch"])((function(){return t.events}),(function(t){1===t.length?n.value=[0]:n.value=[]}),{immediate:!0}),{xkey:ea,panels:n,emit:a}}}),Rs=Ts,Is=a("790c"),Es=a("285a"),Ds=a("487c"),Ls=a("b682"),Ms=Object(h["a"])(Rs,js,Cs,!1,null,"82d7c456",null),Ns=Ms.exports;y()(Ms,{VExpansionPanel:Is["a"],VExpansionPanelContent:Es["a"],VExpansionPanelHeader:Ds["a"],VExpansionPanels:Ls["a"]});var $s=Object(r["defineComponent"])({name:"SpanCard",components:{AttrTable:_s,EventPanels:Ns,LoadPctileChart:bs},props:{dateRange:{type:Object,required:!0},span:{type:Object,required:!0},fluid:{type:Boolean,default:!1}},setup:function(t){var e=Object(r["ref"])("attrs"),a=Object(r["computed"])((function(){return Object(rt["a"])(Object(rt["a"])({},t.dateRange.axiosParams()),{},{system:t.span.system,group_id:t.span.groupId})})),n=Object(r["computed"])((function(){var e;return null!==(e=t.span.attrs[ea.dbStatement])&&void 0!==e?e:""})),o=Object(r["computed"])((function(){var e;return null!==(e=t.span.attrs[ea.exceptionStacktrace])&&void 0!==e?e:""}));return{xkey:ea,meta:Bs(t),activeTab:e,axiosParams:a,dbStmt:n,excStacktrace:o}}});function Bs(t){var e=c(),a=e.route,n=Object(r["computed"])((function(){return t.span.traceId?"TraceShow"===a.value.name&&a.value.params.traceId===t.span.traceId?null:{name:"TraceShow",params:{traceId:t.span.traceId}}:null})),o=Object(r["computed"])((function(){return{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.dateRange.queryParams()),{},{system:t.span.system,where:"".concat(ea.spanGroupId,' = "').concat(t.span.groupId,'"')})}})),s=Object(r["computed"])((function(){var e=[];return e.push({text:t.span.system,to:{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.dateRange.queryParams()),{},{system:t.span.system})},exact:!0}),e.push({text:Object(u["truncate"])(t.span.name,{length:50}),to:{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.dateRange.queryParams()),{},{system:t.span.system,where:"".concat(ea.spanGroupId,' = "').concat(t.span.groupId,'"')})},exact:!0}),t.span.traceId&&e.push({text:t.span.traceId,to:{name:"TraceShow",params:{traceId:t.span.traceId}},exact:!0}),t.span.traceId&&t.span.id&&e.push({text:t.span.id,to:{name:"SpanShow",params:{traceId:t.span.traceId,spanId:t.span.id}},exact:!0}),e}));return Object(r["proxyRefs"])({groupRoute:o,traceRoute:n,breadcrumbs:s})}var As=$s,Fs=a("252b"),Gs=a("e1db"),Xs=Object(h["a"])(As,Jo,Zo,!1,null,"c10ec88a",null),Hs=Xs.exports;y()(Xs,{VBreadcrumbs:Fs["a"],VBreadcrumbsItem:Gs["a"],VBtn:L["a"],VCol:X["a"],VContainer:H["a"],VIcon:de["a"],VRow:Q["a"],VSheet:Xa["a"],VTab:z["a"],VTabItem:pe["a"],VTabs:K["a"],VTabsItems:ve["a"]});var Us=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",["error"===t.attrs[t.xkey.spanStatusCode]?a("v-btn",{staticClass:"mr-1",class:{"cursor-default":!t.clickable},attrs:{icon:"",title:t.xkey.spanStatusCode+" = 'error'"},on:{click:function(e){return e.stopPropagation(),t.$emit("click:chip",{key:t.xkey.spanStatusCode,value:"error"})}}},[a("v-icon",{attrs:{color:"error"}},[t._v(" mdi-alert-circle-outline ")])],1):t._e(),t._l(t.chips,(function(e,n){return a("v-chip",{key:e.key,class:{"ml-1":n>0,"mb-1":n>0,"cursor-default":!t.clickable},attrs:{color:"light-blue lighten-5",label:"",small:"",title:e.key+": "+e.value},on:{click:function(a){return a.stopPropagation(),t.$emit("click:chip",e)}}},[t._v(" "+t._s(e.text)+" ")])}))],2)},Qs=[],Ws=Object(r["defineComponent"])({name:"SpanChips",props:{attrs:{type:Object,required:!0},showOperation:{type:Boolean,default:!1},traceMode:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1}},setup:function(t){var e=Object(r["computed"])((function(){if(t.traceMode)return zs(t.attrs);var e=[],a=t.attrs[ea.serviceName];a&&e.push({key:ea.serviceName,value:a,text:a}),Js(e,t.attrs);var n=t.attrs[ea.codeFilepath];return n&&e.push({key:ea.codeFilepath,value:n,text:Ys(n)}),Zs(e,t.attrs),e}));return{xkey:ea,chips:e}}});function zs(t){var e=[];return Ks(e,t),Js(e,t),Zs(e,t),e}function Ks(t,e){var a=e[ea.spanSystem];a&&a!==ea.internalSystem&&t.push({key:ea.spanSystem,value:a,text:a})}function Js(t,e){var a=e[ea.spanKind];a&&"internal"!==a&&t.push({key:ea.spanKind,value:a,text:a})}function Zs(t,e){var a=e[ea.httpStatusCode];"number"===typeof a&&0!=a&&(a<200||a>=300)&&t.push({key:ea.httpStatusCode,value:a,text:String(a)})}function Ys(t){var e=t.lastIndexOf("/");return-1!==e&&(t=t.slice(e+1)),Object(u["truncate"])(t)}var ti=Ws,ei=(a("c774"),Object(h["a"])(ti,Us,Qs,!1,null,"ea641562",null)),ai=ei.exports;function ni(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.span=t[ea.spanId],{name:"TraceShow",params:{traceId:t[ea.spanTraceId]},query:e}}y()(ei,{VBtn:L["a"],VChip:or["a"],VIcon:de["a"]});var ri=Object(r["defineComponent"])({name:"SpansTable",components:{ThOrder:Pa,SpanChips:ai,SpanCard:Hs},props:{dateRange:{type:Object,required:!0},loading:{type:Boolean,required:!0},spans:{type:Array,required:!0},pager:{type:Object,required:!0},order:{type:Object,required:!0},columns:{type:Array,default:function(){return[]}}},setup:function(t){function e(){Object(r["nextTick"])((function(){t.order.desc=!0}))}return{xkey:ea,dialog:oi(),traceShowRoute:ni,truncate:u["truncate"],onSortBy:e}}});function oi(){var t=Object(r["shallowRef"])(!1),e=Object(r["shallowRef"])();function a(a){e.value=a,t.value=!0}return Object(r["proxyRefs"])({dialog:t,activeSpan:e,showSpan:a})}var si=ri,ii=Object(h["a"])(si,zo,Ko,!1,null,"746e5f60",null),ui=ii.exports;y()(ii,{VDialog:dr["a"],VProgressLinear:On["a"],VSheet:Xa["a"],VSimpleTable:_n["a"]});var li=Object(r["defineComponent"])({name:"SpanListInline",components:{SpanTable:ui},props:{dateRange:{type:Object,required:!0},uql:{type:Object,default:void 0},axiosParams:{type:Object,required:!0},where:{type:String,required:!0}},setup:function(t){var e=Wo((function(){var e=t.where+" | "+t.axiosParams.query;return{url:"/api/tracing/spans",params:Object(rt["a"])(Object(rt["a"])({},t.axiosParams),{},{query:e})}}),{order:{column:ea.spanDuration,desc:!0}}),a=Object(r["computed"])((function(){return t.uql?{"click:chip":n}:{}}));function n(e){var a=t.uql.createEditor();a.where(e.key,"=",e.value),t.uql.commitEdits(a)}return{spans:e,listeners:a,onChipClick:n}}}),ci=li,di=Object(h["a"])(ci,Uo,Qo,!1,null,"4854fd90",null),pi=di.exports,vi=(a("2ce0"),Object(r["defineComponent"])({name:"GroupTable",components:{ThOrder:Pa,LoadGroupSparkline:Ho,SpanListInline:pi},props:{dateRange:{type:Object,required:!0},systems:{type:Object,required:!0},uql:{type:Object,default:void 0},loading:{type:Boolean,required:!0},items:{type:Array,required:!0},columns:{type:Array,required:!0},groupColumns:{type:Array,required:!0},plotColumns:{type:Array,required:!0},order:{type:Object,required:!0},dense:{type:Boolean,default:!1},showDetails:{type:Boolean,default:!1},axiosParams:{type:Object,default:void 0}},setup:function(t){var e=c(),a=e.route,n=Object(r["computed"])((function(){return p(ea.spanName)})),o=Object(r["computed"])((function(){return Boolean(t.showDetails&&t.uql)})),s=Object(r["computed"])((function(){return sa(t.systems.activeValue)&&p(ea.spanSystem)})),l=Object(r["computed"])((function(){return p("max(".concat(ea.spanTime,")"))})),d=Object(r["computed"])((function(){var e=[ea.spanSystem,"max(".concat(ea.spanTime,")")];n.value&&e.push(ea.spanGroupId,ea.spanName);var a=t.columns.filter((function(t){return-1===e.indexOf(t.name)}));return a}));function p(e){if(!t.items.length)return!1;var a=t.items[0];return e in a}function v(e){var n,r=t.uql.createEditor(),o=Object(i["a"])(t.groupColumns);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=e[s.name];r.where(s.name,"=",u)}}catch(l){o.e(l)}finally{o.f()}return{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])(Object(rt["a"])({},a.value.query),t.systems.axiosParams()),{},{query:r.toString()})}}function m(t){switch(t.name){case ea.spanErrorCount:return"Errors";case ea.spanErrorPct:return"Err%"}var e=t.name.match(/^([0-9a-z]+)\(span\.duration\)$/);if(e)return e[1];var a="span.";return t.name.startsWith(a)?t.name.slice(a.length):t.name}function f(e){var a,n=[],r=Object(i["a"])(t.groupColumns);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=e[o.name];n.push("".concat(o.name," = ").concat(la(s)))}}catch(u){r.e(u)}finally{r.f()}return"where ".concat(n.join(" AND "))}function b(t){return{query:Object(rt["a"])(Object(rt["a"])({},a.value.query),{},{system:t[ea.spanSystem]})}}return{xkey:ea,groupViewer:mi(),hasGroupName:n,hasDetails:o,showSystemColumn:s,hasTimeColumn:l,customColumns:d,columnHeader:m,spanListRoute:v,groupBasedWhere:f,systemRoute:b,truncate:u["truncate"]}}}));function mi(){var t=Object(r["shallowRef"])();function e(e){return t.value===e}function a(t){e(t)?o(t):n(t)}function n(e){t.value=e}function o(e){t.value=void 0}return{visible:e,show:n,hide:o,toggle:a}}var fi=vi,bi=Object(h["a"])(fi,No,$o,!1,null,"65d85b10",null),hi=bi.exports;y()(bi,{VBtn:L["a"],VIcon:de["a"],VProgressLinear:On["a"],VSimpleTable:_n["a"]});var gi=Object(r["defineComponent"])({name:"GroupList",components:{GroupTable:hi},props:{dateRange:{type:Object,required:!0},systems:{type:Object,required:!0},uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])([]),a=Do((function(){return{url:"/api/tracing/groups",params:t.axiosParams}}));return Object(r["watch"])((function(){return a.plotColumns}),(function(t){t.length&&!e.value.length&&(e.value=[t[0].name])})),Object(r["watch"])((function(){return a.queryParts}),(function(e){e&&t.uql.syncParts(e)})),{activeColumns:e,explore:a}}}),yi=gi,xi=Object(h["a"])(yi,Io,Eo,!1,null,null,null),Oi=xi.exports;y()(xi,{VBtn:L["a"],VCard:ue["a"],VCardText:le["b"],VCol:X["a"],VRow:Q["a"],VSlideGroup:Sn["b"],VSlideItem:Vn["a"],VSpacer:W["a"],VToolbar:qn["a"],VToolbarTitle:We["a"]});var _i=Object(r["defineComponent"])({name:"Tracing",components:{DateRangePicker:Re,SystemPicker:Kn,HelpCard:ta,UptraceQuery:gr,SpanFilters:Ro,GroupList:Oi},setup:function(){Object(nt["useTitle"])("Explore spans");var t=Tt(),e=At(t),a=pa({query:ha(ea.spanGroupId),syncQuery:!0}),n=Object(r["computed"])((function(){return Object(rt["a"])(Object(rt["a"])(Object(rt["a"])({},t.axiosParams()),a.axiosParams()),{},{system:e.activeValue})}));return{dateRange:t,systems:e,uql:a,axiosParams:n}}}),ji=_i,Ci=Object(h["a"])(ji,Ln,Mn,!1,null,"d37c99d8",null),wi=Ci.exports;y()(Ci,{VCol:X["a"],VContainer:H["a"],VRow:Q["a"]});var ki=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XPlaceholder",{scopedSlots:t._u([t.trace.error?{key:"placeholder",fn:function(){return[t.trace.error?a("TraceError",{attrs:{error:t.trace.error}}):t._e()]},proxy:!0}:t.trace.root?null:{key:"placeholder",fn:function(){return[a("v-container",{attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-skeleton-loader",{attrs:{type:"article, image, table"}})],1)]},proxy:!0}],null,!0)},[a("PageToolbar",{attrs:{loading:t.trace.loading,fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-breadcrumbs",{attrs:{items:t.meta.breadcrumbs,divider:">",large:""},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-breadcrumbs-item",{attrs:{to:n.to,exact:n.exact}},[t._v(" "+t._s(n.text)+" ")])]}}])})],1),a("v-container",{staticClass:"py-4",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[t.trace.root?a("v-row",{staticClass:"px-4 text-body-2"},[a("v-col",[t._v(" "+t._s(t.trace.root.name)+" ")])],1):t._e(),t.trace.root?a("v-row",{staticClass:"px-4 text-subtitle-2 text-center",attrs:{align:"end"}},[t.trace.root.kind?a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Kind")]),a("div",[t._v(t._s(t.trace.root.kind))])]):t._e(),t.trace.root.statusCode?a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Status")]),a("div",{class:{"error--text":"error"===t.trace.root.statusCode}},[t._v(" "+t._s(t.trace.root.statusCode)+" ")])]):t._e(),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Time")]),a("XDate",{attrs:{date:t.trace.root.time,format:"full"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Duration")]),a("XDuration",{attrs:{duration:t.trace.root.duration,fixed:""}})],1),a("v-col",{attrs:{cols:"auto"}},[t.groupRoute?a("v-btn",{attrs:{depressed:"",small:"",to:t.groupRoute,exact:""}},[t._v("View group")]):t._e()],1),a("v-col",{attrs:{cols:"auto"}},[t.exploreTraceRoute?a("v-btn",{attrs:{depressed:"",small:"",to:t.exploreTraceRoute,exact:""}},[t._v("Explore trace")]):t._e()],1)],1):t._e(),t.trace.root&&t.trace.root.groupId?a("v-row",[a("v-col",[a("v-card",{attrs:{outlined:"",rounded:"lg"}},[a("v-card-text",[a("LoadPctileChart",{attrs:{"axios-params":t.axiosParams}})],1)],1)],1)],1):t._e(),a("v-row",[a("v-col",[a("SystemBarChart",{attrs:{systems:t.trace.coloredSystems}})],1)],1),a("v-row",[a("v-col",[a("v-sheet",{staticClass:"pa-4",attrs:{outlined:"",rounded:"lg"}},[a("TraceTimeline",{attrs:{"date-range":t.dateRange,trace:t.trace}})],1)],1)],1)],1)],1)},Si=[],Vi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-sheet",{attrs:{outlined:"",rounded:"t-lg"}},[a("v-row",t._l(t.styledSystems,(function(e){return a("v-col",{key:e.system,staticClass:"py-5 text-center text-subtitle-2",attrs:{justify:"space-around"}},[a("v-avatar",{staticClass:"mr-2",attrs:{color:e.color.base,size:"12"}}),a("span",{staticClass:"d-inline-flex mr-1"},[t._v(t._s(t.truncate(e.system,{length:30})))]),a("span",{staticClass:"d-inline-flex blue-grey--text"},[t._v(t._s(t.percent(e.duration/t.totalDuration)))])],1)})),1)],1),a("div",{staticClass:"d-flex"},t._l(t.styledSystems,(function(e){return a("v-tooltip",{key:e.system,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[a("div",t._g({staticClass:"bar",style:e.barStyle},r))]}}],null,!0)},[a("div",[a("span",[t._v(t._s(e.system))]),a("XDuration",{staticClass:"ml-1",attrs:{duration:e.duration}})],1)])})),1),a("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{indeterminate:"",absolute:""}})],1)},qi=[],Pi=Object(r["defineComponent"])({name:"SystemBarChart",props:{loading:{type:Boolean,default:!1},systems:{type:Array,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){return t.systems.reduce((function(t,e){return e.duration?t+e.duration:t}),0)})),a=Object(r["computed"])((function(){var a,n=t.systems.slice(0,5),r=Object(i["a"])(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.barStyle={width:Ti(o.duration,e.value),"background-color":o.color.base}}}catch(s){r.e(s)}finally{r.f()}return n}));return{styledSystems:a,totalDuration:e,truncate:u["truncate"],percent:nn}}});function Ti(t,e){if(0===e)return"100%";var a=t/e*100;return a+"%"}var Ri=Pi,Ii=(a("e4c5"),Object(h["a"])(Ri,Vi,qi,!1,null,"67799368",null)),Ei=Ii.exports;y()(Ii,{VAvatar:lo["a"],VCol:X["a"],VProgressLinear:On["a"],VRow:Q["a"],VSheet:Xa["a"],VTooltip:sr["a"]});var Di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"trace-table trace-table--timeline"},[t._m(0),t._m(1),a("tbody",[t._l(t.trace.spans,(function(e){return[t.trace.isVisible(e)?a("tr",{key:"span-"+e.id,staticClass:"cursor-pointer",class:{active:e===t.trace.activeSpan},attrs:{id:"span-"+e.id},on:{click:function(a){return t.showSpan(e)}}},[a("td",{style:{paddingLeft:36+20*e.level+"px"}},[a("v-btn",{staticClass:"ml-n9",attrs:{icon:"",disabled:!e.children},on:{click:function(a){return a.stopPropagation(),t.trace.toggleTree(e)}}},[a("v-icon",{attrs:{size:"28"}},[t._v(t._s(t.trace.isExpanded(e)?"mdi-chevron-down":"mdi-chevron-right"))])],1),a("span",{staticClass:"cursor-pointer span-name"},[t._v(t._s(t.truncate(e.name,{length:100})))]),a("SpanChips",{staticClass:"ml-2",attrs:{attrs:e.attrs,"trace-mode":""}})],1),a("td",{staticClass:"text-caption",staticStyle:{position:"relative"}},[a("span",{style:e.labelStyle},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.children&&t.trace.isExpanded(e),expression:"span.children && trace.isExpanded(span)"}]},[a("XDuration",{attrs:{duration:e.durationSelf}}),a("span",{staticClass:"mx-1"},[t._v("of")])],1),a("XDuration",{attrs:{duration:e.duration}})],1),t._l(e.bars,(function(n,r){return a("span",{key:r,staticClass:"span-bar",style:n.coloredStyle,attrs:{title:t.durationFixed(n.duration)+" "+e.name}})})),e.children?a("TraceTimelineChildrenBars",{attrs:{trace:t.trace,span:e,children:e.children,hidden:!t.trace.isExpanded(e)}}):t._e()],2)]):t._e()]}))],2)]),a("v-dialog",{attrs:{"max-width":"1280"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-sheet",[t.trace.activeSpan?a("SpanCard",{key:t.trace.activeSpan.id,attrs:{"date-range":t.dateRange,span:t.trace.activeSpan,fluid:""}}):t._e()],1)],1)],1)},Li=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("colgroup",[a("col",{staticStyle:{width:"50%"}}),a("col",{staticStyle:{width:"50%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"px-2"},[t._v("Operation")]),a("th",[t._v("Timeline")])])])}],Mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.internalChildren,(function(e){return[t._l(e.bars,(function(n,r){return a("span",{key:e.id+"-"+r,staticClass:"span-bar",style:t.hidden?n.coloredStyle:n.lightenStyle,attrs:{title:t.durationFixed(n.duration)+" "+e.name}})})),e.children?a("TraceTimelineChildrenBars",{key:e.id,attrs:{trace:t.trace,span:t.span,children:e.children,hidden:t.hidden}}):t._e()]}))],2)},Ni=[],$i=Object(r["defineComponent"])({name:"TraceTimelineChildrenBars",props:{trace:{type:Object,required:!0},span:{type:Object,required:!0},children:{type:Array,required:!0},hidden:{type:Boolean,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){return t.children.filter((function(e){return e.endPct<=t.span.endPct&&"consumer"!==e.kind}))}));return{internalChildren:e,durationFixed:sn}}}),Bi=$i,Ai=Object(h["a"])(Bi,Mi,Ni,!1,null,null,null),Fi=Ai.exports,Gi=Object(r["defineComponent"])({name:"TraceTimeline",components:{SpanCard:Hs,SpanChips:ai,TraceTimelineChildrenBars:Fi},props:{dateRange:{type:Object,required:!0},trace:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1);function a(a){e.value=!0,t.trace.activeSpanId=a.id}return{dialog:e,showSpan:a,truncate:u["truncate"],durationFixed:sn}}}),Xi=Gi,Hi=(a("11f0"),a("a4e0"),Object(h["a"])(Xi,Di,Li,!1,null,"2400203e",null)),Ui=Hi.exports;y()(Hi,{VBtn:L["a"],VDialog:dr["a"],VIcon:de["a"],VSheet:Xa["a"]});var Qi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height grey lighten-5",attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"text-center"},[t.title?a("h1",{staticClass:"text-h1"},[t._v(t._s(t.title))]):t._e(),a("h2",{staticClass:"mt-4 text-h5"},[t._v(t._s(t.message))])])],1)],1)},Wi=[],zi=Object(r["defineComponent"])({name:"TraceError",props:{error:{type:Error,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){return t.error})),a=Object(r["computed"])((function(){var t,a,n,r;return null!==(t=null===(a=e.value)||void 0===a||null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.status)&&void 0!==t?t:""})),n=Object(r["computed"])((function(){var a,n,r,o;return null!==(a=null===(n=e.value)||void 0===n||null===(r=n.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)&&void 0!==a?a:String(t.error)}));return{title:a,message:n}}}),Ki=zi,Ji=Object(h["a"])(Ki,Qi,Wi,!1,null,"18d9686c",null),Zi=Ji.exports;function Yi(t,e){!1!==e(t,null)&&tu(t,e)}function tu(t,e){if(!t.children)return!0;var a,n=Object(i["a"])(t.children);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(!1===e(r,t))return!1;if(!1===tu(r,e))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}function eu(t,e){var a=au(t,e);return a}function au(t,e){var a=[];return Yi(t,(function(t,n){t.parent=n,a.push(t),t.level=n?n.level+1:0;var r=t.startPct,o=nu(r,t.duration,e.duration);t.endPct=r+o,t.labelStyle=ou(r,o),t.bars=[];var s=ru(r,o);return t.bars.push({duration:t.durationSelf,style:s,coloredStyle:Object.assign({},s,{backgroundColor:t.color}),lightenStyle:Object.assign({},s,{backgroundColor:t.lightenColor})}),!0})),a}function nu(t,e,a){var n=e/a;return t+n>1?1-t:n}function ru(t,e){var a=su(t),n=e<=.001?"1px":su(e);return{left:a,width:n}}function ou(t,e){var a={position:"absolute",bottom:"6px"};if(t<=.5)a.left=su(t);else{var n=1-(t+e);a.right=su(n)}return a}function su(t){return 100*t+"%"}y()(Ji,{VCol:X["a"],VContainer:H["a"],VRow:Q["a"]});var iu=["blue","pink","green","orange","purple","teal"].map((function(t){var e=Ea["a"][t];return{lighten:e.lighten4,base:e.base,darken:e.darken2}}));function uu(t){var e={};Yi(t,(function(t,a){if(t._system=t.system,t._system===ea.internalSystem&&a&&(t._system=a._system),!t._system)return!0;var n=e[t._system];n||(n={system:t._system,duration:0,color:void 0},e[t._system]=n);var r=t.durationSelf;return r&&(n.duration+=r),!0}));var a=lu(e),n=iu[iu.length-1];return Yi(t,(function(t){var a,r,o=null!==(a=null===(r=e[t._system])||void 0===r?void 0:r.color)&&void 0!==a?a:n;return t.color=o.base,t.lightenColor=o.lighten,t.darkenColor=o.darken,!0})),a}function lu(t){var e=[];for(var a in t)e.push(t[a]);e.sort((function(t,e){return t.duration<e.duration?1:t.duration>e.duration?-1:0}));for(var n=0;n<e.length&&n<iu.length-1;n++){var r=e[n];r.color=iu[n]}return e}function cu(){var t=c(),e=t.route,a=dt(),n=a.forceReloadParams,o=Object(r["ref"])(""),s=Object(r["ref"])([]),u=du(),l=u.isVisible,d=u.isExpanded,p=u.toggleTree,v=u.showTree,m=Bt((function(){var t=e.value.params.traceId;return{url:"/api/tracing/traces/".concat(t),params:Object(rt["a"])({},n.value)}})),f=m.loading,b=m.data,h=m.error,g=Object(r["computed"])((function(){return e.value.params.traceId})),y=Object(r["computed"])((function(){var t;return null===(t=b.value)||void 0===t?void 0:t.trace})),x=Object(r["computed"])((function(){var t;return null===(t=b.value)||void 0===t?void 0:t.root})),O=Object(r["computed"])((function(){var t,e=null===(t=b.value)||void 0===t?void 0:t.root;if(!e)return[];var a=eu(e,y.value);return a})),_=Object(r["computed"])((function(){if(o.value)return O.value.find((function(t){return t.id===o.value}))}));return Object(r["watch"])(O,(function(t){if(t.length){var e=t[0];if(e.children){var a,n=Object(i["a"])(e.children);try{for(n.s();!(a=n.n()).done;){var r=a.value;Yi(r,(function(t){return p(t),!0}))}}catch(o){n.e(o)}finally{n.f()}}}}),{immediate:!0}),Object(r["watch"])(_,(function(t){t&&v(t)})),Object(r["watch"])(x,(function(t){t&&(s.value=uu(t))}),{flush:"sync"}),Object(r["proxyRefs"])({activeSpanId:o,activeSpan:_,loading:f,error:h,coloredSystems:s,root:x,spans:O,id:g,trace:y,isVisible:l,isExpanded:d,toggleTree:p,showTree:v})}function du(){var t=Object(r["shallowReactive"])({}),e=Object(r["shallowReactive"])({});function a(e){return e.id in t||Object(r["set"])(t,e.id,0),!t[e.id]}function n(t){return t.id in e||Object(r["set"])(e,t.id,!1),!e[t.id]}function o(t){Object(r["set"])(e,t.id,n(t)),s(t,n(t)?1:-1)}function s(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.children){var n,o=Object(i["a"])(e.children);try{for(o.s();!(n=o.n()).done;){var u,l=n.value;Object(r["set"])(t,l.id,(null!==(u=t[l.id])&&void 0!==u?u:0)+a),s(l,a)}}catch(c){o.e(c)}finally{o.f()}}}function u(t){t=t.parent;while(t)n(t)||o(t),t=t.parent}return{isVisible:a,isExpanded:n,toggleTree:o,showTree:u}}var pu=Object(r["defineComponent"])({name:"TraceShow",components:{LoadPctileChart:bs,SystemBarChart:Ei,TraceTimeline:Ui,TraceError:Zi},setup:function(){Object(nt["useTitle"])("View trace");var t=Tt(),e=cu(),a=Object(r["computed"])((function(){if(e.root)return Object(rt["a"])(Object(rt["a"])({},t.axiosParams()),{},{system:e.root.system,group_id:e.root.groupId})})),n=Object(r["computed"])((function(){if(e.root)return{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.queryParams()),{},{system:e.root.system,where:"".concat(ea.spanGroupId,' = "').concat(e.root.groupId,'"')})}})),o=Object(r["computed"])((function(){if(e.root)return{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.queryParams()),{},{system:ea.allSystem,query:["group by ".concat(ea.spanGroupId),ea.spanCount,ea.spanErrorCount,"p50(".concat(ea.spanDuration,")"),"p90(".concat(ea.spanDuration,")"),"p99(".concat(ea.spanDuration,")"),"sum(".concat(ea.spanDuration,")"),"where ".concat(ea.spanTraceId,' = "').concat(e.root.traceId,'"')].join(" | "),plot:null})}}));return Object(r["watch"])((function(){return e.root}),(function(e){e&&(Object(nt["useTitle"])(e.name),t.changeWithin(e.time,yt))})),{dateRange:t,trace:e,meta:vu(t,e),axiosParams:a,groupRoute:n,exploreTraceRoute:o}}});function vu(t,e){var a=Object(r["computed"])((function(){var a=e.root,n=[];return a?(a.system&&n.push({text:a.system,to:{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.queryParams()),{},{system:a.system})},exact:!0}),a.system&&a.groupId&&n.push({text:a.name,to:{name:"GroupList",query:Object(rt["a"])(Object(rt["a"])({},t.queryParams()),{},{system:a.system,where:"".concat(ea.spanGroupId,' = "').concat(a.groupId,'"')})},exact:!0}),n.push({text:e.id}),n):n}));return Object(r["proxyRefs"])({breadcrumbs:a})}var mu=pu,fu=Object(h["a"])(mu,ki,Si,!1,null,"355bdd64",null),bu=fu.exports;y()(fu,{VBreadcrumbs:Fs["a"],VBreadcrumbsItem:Gs["a"],VBtn:L["a"],VCard:ue["a"],VCardText:le["b"],VCol:X["a"],VContainer:H["a"],VRow:Q["a"],VSheet:Xa["a"],VSkeletonLoader:Ar["a"]});var hu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.span.loading?a("v-progress-linear",{attrs:{absolute:"",indeterminate:""}}):t._e(),t.span.item?a("SpanCard",{attrs:{"date-range":t.dateRange,span:t.span.item,fluid:t.$vuetify.breakpoint.mdAndDown}}):t._e()],1)},gu=[],yu=Object(r["defineComponent"])({name:"SpanShow",components:{SpanCard:Hs},setup:function(){var t=Tt(),e=xu();return Object(r["watch"])((function(){return e.item}),(function(e){e&&(Object(nt["useTitle"])(e.name),t.changeWithin(e.time,yt))})),{dateRange:t,span:e}}});function xu(){var t=c(),e=t.route,a=Bt((function(){var t=e.value.params,a=t.traceId,n=t.spanId;return{url:"/api/tracing/traces/".concat(a,"/").concat(n)}})),n=a.loading,o=a.data,s=Object(r["computed"])((function(){var t;return null===(t=o.value)||void 0===t?void 0:t.span}));return Object(r["proxyRefs"])({loading:n,item:s})}var Ou=yu,_u=Object(h["a"])(Ou,hu,gu,!1,null,"624a788d",null),ju=_u.exports;y()(_u,{VProgressLinear:On["a"]});var Cu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HelpCard")},wu=[],ku=Object(r["defineComponent"])({name:"Tracing",components:{HelpCard:ta},setup:function(){Object(nt["useTitle"])("Getting started with Uptrace")}}),Su=ku,Vu=Object(h["a"])(Su,Cu,wu,!1,null,"69cf899e",null),qu=Vu.exports;n["default"].use(tt["a"]);var Pu=[{name:"Home",path:"/",redirect:{name:"GroupList"}},{name:"Overview",path:"/overview",component:Dn},{name:"GroupList",path:"/explore",component:wi},{name:"TraceShow",path:"/traces/:traceId",component:bu},{name:"SpanShow",path:"/traces/:traceId/:spanId",component:ju},{name:"Help",path:"/help",component:qu}],Tu=new tt["a"]({mode:"history",base:"/",routes:Pu}),Ru=Tu,Iu=(a("b20f"),a("a69d"));n["default"].directive("frag",Iu["a"]);var Eu=a("654b");Object(Eu["a"])(It.a,{retries:2,retryDelay:Eu["a"].exponentialDelay}),It.a.interceptors.request.use((function(t){return t.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_URL,t.withCredentials=!0,t}));a("3468"),a("365e"),a("c058"),a("e52c"),a("fdca");var Du=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-toolbar",class:t.color},[t.loading?a("v-progress-linear",{attrs:{absolute:"",indeterminate:""}}):t._e(),a("v-container",{staticClass:"py-0",attrs:{fluid:t.fluid}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0"},[a("v-toolbar",{attrs:{flat:"",color:"transparent",height:"auto"}},[t._t("default")],2)],1)],1)],1)],1)},Lu=[],Mu=Object(r["defineComponent"])({name:"PageToolbar",props:{loading:{type:Boolean,default:!1},fluid:{type:Boolean,default:!1},color:{type:String,default:"light-blue lighten-5"}},setup:function(){return{}}}),Nu=Mu,$u=(a("87c2"),Object(h["a"])(Nu,Du,Lu,!1,null,null,null)),Bu=$u.exports;y()($u,{VCol:X["a"],VContainer:H["a"],VProgressLinear:On["a"],VRow:Q["a"],VToolbar:qn["a"]});var Au=Object(r["defineComponent"])({name:"XPlaceholder",setup:function(t,e){return function(){return e.slots.placeholder?Fu(e.slots.placeholder()):e.slots.default?Fu(e.slots.default()):void 0}}});function Fu(t){return Array.isArray(t)&&t.length>1?Object(r["h"])("div",t):t}var Gu,Xu,Hu,Uu,Qu=Au,Wu=Object(h["a"])(Qu,Gu,Xu,!1,null,null,null),zu=Wu.exports,Ku=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.pager.numPage>1?a("v-row",{attrs:{align:"center",justify:"space-between","no-gutters":""}},[a("v-col",{attrs:{cols:"2"}}),a("v-col",[a("v-pagination",{attrs:{"total-visible":7,length:t.pager.numPage},model:{value:t.pager.page,callback:function(e){t.$set(t.pager,"page",e)},expression:"pager.page"}})],1),a("v-col",{staticClass:"text-right",attrs:{cols:"2"}},[t.pager.numItem?a("XPager",{attrs:{pager:t.pager,"without-prev-next":""}}):t._e()],1)],1):t._e()},Ju=[],Zu=n["default"].component("XPager",{functional:!0,props:{pager:{type:Object,required:!0},withoutPrevNext:{type:Boolean,default:!1}},render:function(t,e){var a=e.props,n=e.data,r=[t("span",{class:"text-body-2"},"".concat(a.pager.pos.start+1," - ").concat(a.pager.pos.end," of ")+"".concat(a.pager.numItem))];return a.withoutPrevNext||(r.push(t(L["a"],{class:{"ml-2":!0},props:{icon:!0,disabled:!a.pager.hasPrev},on:{click:a.pager.prev}},[t(de["a"],"mdi-chevron-left")])),r.push(t(L["a"],{props:{icon:!0,disabled:!a.pager.hasNext},on:{click:a.pager.next}},[t(de["a"],"mdi-chevron-right")]))),t("span",Object(rt["a"])({},n),r)}}),Yu=Zu,tl=Object(h["a"])(Yu,Hu,Uu,!1,null,"518cdcf5",null),el=tl.exports,al=Object(r["defineComponent"])({name:"XPagination",components:{XPager:el},props:{pager:{type:Object,required:!0}}}),nl=al,rl=a("c31e"),ol=Object(h["a"])(nl,Ku,Ju,!1,null,"68dec63a",null),sl=ol.exports;y()(ol,{VCol:X["a"],VPagination:rl["a"],VRow:Q["a"]});var il,ul,ll=n["default"].component("XNum",{functional:!0,props:{value:{type:void 0,required:!0},name:{type:String,default:""}},render:function(t,e){var a=e.props,n=Qa(a.name,a.value),r=ln(n);return t("span",r(a.value))}}),cl=ll,dl=Object(h["a"])(cl,il,ul,!1,null,"6fba924e",null),pl=dl.exports,vl=a("71bc"),ml=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{staticClass:"my-0 x-code",attrs:{color:"grey lighten-5"}},[a("prism",{attrs:{code:t.code,inline:t.inline,language:t.language}})],1)},fl=[],bl=a("c45e"),hl=a.n(bl),gl=Object(r["defineComponent"])({name:"XCode",components:{Prism:hl.a},props:{code:{type:String,required:!0},language:{type:String,default:"markup"},inline:{type:Boolean,default:!1}},setup:function(){return{}}}),yl=gl,xl=(a("5a7a"),Object(h["a"])(yl,ml,fl,!1,null,null,null)),Ol=xl.exports;y()(xl,{VSheet:Xa["a"]});var _l=n["default"].component("XText",{functional:!0,props:{name:{type:String,default:""},value:{type:void 0,required:!0}},render:function(t,e){var a=e.props,n=e.data;if(Array.isArray(a.value))return t("span",n,a.value.join(", "));switch(Object(vl["a"])(a.value)){case"object":return t(Ol,{props:{code:JSON.stringify(a.value,null,2)}});case"string":var r=jl(a.value);if("object"===Object(vl["a"])(r))return t(Ol,{props:{code:JSON.stringify(r,null,2)}});break}return Cl(a.value)?t(Ol,{props:{code:a.value}}):t(pl,{props:{name:a.name,value:a.value}})}});function jl(t){try{return JSON.parse(t)}catch(e){return}}function Cl(t){return"string"===typeof t&&t.includes("\n")}var wl,kl,Sl,Vl,ql,Pl,Tl=_l,Rl=Object(h["a"])(Tl,wl,kl,!1,null,"44e08f33",null),Il=Rl.exports,El=n["default"].component("XDate",{functional:!0,props:{date:{type:[String,Date],required:!0}},render:function(t,e){var a=e.props,n=e.data,r=Ot(a.date);return t("span",n,_t(r))}}),Dl=El,Ll=Object(h["a"])(Dl,Sl,Vl,!1,null,"5c2cf197",null),Ml=Ll.exports,Nl=n["default"].component("XDuration",{functional:!0,props:{duration:{type:Number,default:void 0}},render:function(t,e){var a=e.props,n=sn(a.duration);return t("span",n)}}),$l=Nl,Bl=Object(h["a"])($l,ql,Pl,!1,null,"77d6d3b7",null),Al=Bl.exports;n["default"].component("PageToolbar",Bu),n["default"].component("XPlaceholder",zu),n["default"].component("XPagination",sl),n["default"].component("XNum",pl),n["default"].component("XText",Il),n["default"].component("XDate",Ml),n["default"].component("XDuration",Al),n["default"].component("XCode",Ol);var Fl=a("85af");n["default"].use(Fl["a"]);var Gl=new Fl["a"]({});n["default"].use(r["default"]),n["default"].config.productionTip=!1,new n["default"]({router:Ru,vuetify:Gl,render:function(t){return t(Y)}}).$mount("#app")},ce7b:function(t,e,a){"use strict";a("b19c")},d1ab:function(t,e,a){},d36a:function(t,e,a){"use strict";a("d1ab")},d502:function(t,e,a){"use strict";a("8f56")},d542:function(t,e,a){"use strict";a("4fbb")},e4c5:function(t,e,a){"use strict";a("c867")},f11e:function(t,e,a){}});
//# sourceMappingURL=app.395ddfea.js.map